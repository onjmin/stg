import"../chunks/DsnmJJEf.js";import{o as ae,aF as v,S as nt,aw as o,al as e,ag as ot,av as W,u as He,aJ as te,_ as q,X as lt,aq as I,$ as ie,Z as X,ah as ht,ao as y,ap as b}from"../chunks/DEERYOzy.js";import{d as ct,s as z}from"../chunks/BqXYD2dU.js";import{b as ut,i as me}from"../chunks/cmih5K62.js";import{s as re}from"../chunks/CgiPoevw.js";const Ke=[...` 	
\r\f \v\uFEFF`];function dt(s,t,i){var r=s==null?"":""+s;if(i){for(var a in i)if(i[a])r=r?r+" "+a:a;else if(r.length)for(var l=a.length,f=0;(f=r.indexOf(a,f))>=0;){var A=f+l;(f===0||Ke.includes(r[f-1]))&&(A===r.length||Ke.includes(r[A]))?r=(f===0?"":r.substring(0,f))+r.substring(A+1):f=A}}return r===""?null:r}function Oe(s,t=!1){var i=t?" !important;":";",r="";for(var a in s){var l=s[a];l!=null&&l!==""&&(r+=" "+a+": "+l+i)}return r}function ft(s,t){if(t){var i="",r,a;return Array.isArray(t)?(r=t[0],a=t[1]):r=t,r&&(i+=Oe(r)),a&&(i+=Oe(a,!0)),i=i.trim(),i===""?null:i}return String(s)}function Ve(s,t,i,r,a,l){var f=s.__className;if(ae||f!==i||f===void 0){var A=dt(i,r,l);(!ae||A!==s.getAttribute("class"))&&(A==null?s.removeAttribute("class"):s.className=A),s.__className=i}else if(l&&a!==l)for(var x in l){var B=!!l[x];(a==null||B!==!!a[x])&&s.classList.toggle(x,B)}return l}function xe(s,t={},i,r){for(var a in i){var l=i[a];t[a]!==l&&(i[a]==null?s.style.removeProperty(a):s.style.setProperty(a,l,r))}}function ve(s,t,i,r){var a=s.__style;if(ae||a!==t){var l=ft(t,r);(!ae||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=t}else r&&(Array.isArray(r)?(xe(s,i?.[0],r[0]),xe(s,i?.[1],r[1],"important")):xe(s,i,r));return r}const gt=()=>performance.now(),L={tick:s=>requestAnimationFrame(s),now:()=>gt(),tasks:new Set};function Ge(){const s=L.now();L.tasks.forEach(t=>{t.c(s)||(L.tasks.delete(t),t.f())}),L.tasks.size!==0&&L.tick(Ge)}function At(s){let t;return L.tasks.size===0&&L.tick(Ge),{promise:new Promise(i=>{L.tasks.add(t={c:s,f:i})}),abort(){L.tasks.delete(t)}}}function pt(s){return s}function Ue(s){return--s*s*s*s*s+1}function ze(s){return Object.prototype.toString.call(s)==="[object Date]"}function we(s,t){if(s===t||s!==s)return()=>s;const i=typeof s;if(i!==typeof t||Array.isArray(s)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=t.map((a,l)=>we(s[l],a));return a=>r.map(l=>l(a))}if(i==="object"){if(!s||!t)throw new Error("Object cannot be null");if(ze(s)&&ze(t)){const l=s.getTime(),A=t.getTime()-l;return x=>new Date(l+x*A)}const r=Object.keys(t),a={};return r.forEach(l=>{a[l]=we(s[l],t[l])}),l=>{const f={};return r.forEach(A=>{f[A]=a[A](l)}),f}}if(i==="number"){const r=t-s;return a=>s+a*r}return()=>t}class ne{#e;#i;#r;#t=null;constructor(t,i={}){this.#e=v(t),this.#i=v(t),this.#r=i}static of(t,i){const r=new ne(t(),i);return nt(()=>{r.set(t())}),r}set(t,i){o(this.#i,t);let{delay:r=0,duration:a=400,easing:l=pt,interpolate:f=we}={...this.#r,...i};if(a===0)return this.#t?.abort(),o(this.#e,t),Promise.resolve();const A=L.now()+r;let x,B=!1,Y=this.#t;return this.#t=At(M=>{if(M<A)return!0;if(!B){B=!0;const c=this.#e.v;x=f(c,t),typeof a=="function"&&(a=a(c,t)),Y?.abort()}const G=M-A;return G>a?(o(this.#e,t),!1):(o(this.#e,x(l(G/a))),!0)}),this.#t.promise}get current(){return e(this.#e)}get target(){return e(this.#i)}set target(t){this.set(t)}}const Ne=""+new URL("../assets/boss0000.DrC-qh-D.png",import.meta.url).href,We=""+new URL("../assets/boss0001.CDO59PxZ.png",import.meta.url).href,se=""+new URL("../assets/boss0002.-_lDpCuA.png",import.meta.url).href,mt=""+new URL("../assets/player.B1E5JB-u.png",import.meta.url).href,xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEdElEQVR4AdyYPWtUQRSGZwQt1VqwsRMMQRFTxC5qIYoIBjSilYGIlbU/wkoUtLHQiFaipFBS5hdY2FlapzbIep6z90zmzt6PmbubGJV5d+Z8v+/s3c3iIfeP//tvBIzkjYgh5oFdNZ72Dnjovlz75YCc46T0LOE9Xem8ml3xg4ByNgE4AkhqgyRZQznOdGnftrnmTyfGAvzqiyPu/K3vaU7NjhrpQAmyyzZoUauI+nY2gqMk6O3L7mIB2P7spXkVkSuEwVKoJEp3ag1S27ngk5KnIBWAL4AiEBw9ByPTt/e0qYWZD2rOyGgSoO9ClON+n3wdm7Uzt2KEa4EGg1zclm82vhTMjInzZEhOeHTkrKtJAIGaiIWFCyqCpgQNEIAMNmf2ElCb1jEDMNN6tZEn3iaA2IQInDRnZzAEOOeCfOri/NhnvXPJ06dLAPGaCBzABnE2xETMl7N//nLX3Ti17NjT/K6bt9w+AeQFEXYza09W7Q8e8WJA1nDtyhsHPv74oH1sRg55CnIEkDchAmeKrnfBCHPbEDbEPUrJU5srgFwVUd0MtuN5TkEAHzsw4kaYmyYegzxAbyDniW8b8TWuEgE0CI0hwI03gUSDESfffGlNHJOcMEPOvatUAA11ACQwmkAMUiCOp7bFyK/O2rs6Z21DBGQ1JglikAZm4+M8KwwWAKkUXaRi4mkddldtV2ywAJqORiMHlo/ddwAiBuLAiJufnVxALSBvKKYSEA+9eWZHxbxdvKN7HOMMUYuRi28WKBAQxvHTWQ3vx5+599vjH3vrF1eCn5vf/PbMAc7ej3Mtx2q8H/u10LnQu7J7tyEC3O3Fp9rYiHnv3crWegB+EpbmHjnAGV+c47133vvwF916kluCQQLiARBLceL6V/fg+eEaqCFv6fhVJW07/mlQKiC8xdwYH8im4T8/XXYbGxu1EIJqjsqgB70qky3MwOhDrgCajhgErClnCBjMz46IVw93XAz8gPzN7Q39KUIPfIAzkLPOk7135QigmTZ6t/XYGdQhLww0QKwPELd8dmmhy/qyq2P8EmaPzcnXHAFeymKED7H4gyAbfProPdeFphp8kZh4FmfCrcgRMFEMWYMEGWIQM2tZvrc+7FmVSdIQAWG49OIs2+6anzvnurCbGU70iBECOYdcATyLKXL6T+RUj8pMetE8R8CI7+8YFE6LpF8sqKh1joCJhgwXJ0NlC0u/ZoPVcuBZr+pDBrZBnGlfcbWvPgF6++3lIZJFPmTP8NAnQP/DN53Hd734+ODJNl785ulD0+2Pq4e/9gnI6Zz7LuX0Ks7JEVB7F5puP3cqz3lVn1vSm5cjgCYqomH4TG+/6l97NBnehVwB9KCxAXsw+YooPRTYQI3ClxIBcevB5HmMaARhg9h2Mexi5q8hAgaTN1qIAJVdTLqq022IAC08KC+lAvJufx/VlQjQP/H23LLvI8/WUSUCeFZrQESM1il7GCgR0ETjrwuaVkAqqlNQ/G5xTouH2LMWkHKoCZJgky3u4esPAAAA//8PuSOiAAAABklEQVQDAOQpdH9TChAxAAAAAElFTkSuQmCC",vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAACQCAYAAABOHuhpAAAHs0lEQVR4AeycMZIkNRBFq7E2OAOBtXfYxeYI4HAEbAzOgIHNEXDgCPg7wRXGIjgDgdfk09SfVWukailTmmYjeqJ+p5RKZf4vddf0RCnms+0T/7kLuPUGrtqBswkrYa7512wBifSHDx+28/n8DPpGPY2ZnXrNEpDIQRTi7969uyBJHz/jNpBizU65Zgg4QwyCED1ixThxxFscQszErhkCNoiN0BiNP8odFZBW/6hAa2zWLkQFDK++BM3ahYgA9+pLxIxdiAgQj5va6QIeHh62FlYoDQmIvo+j81mQkAASCFp19Wu2J6Y278gXEXCyn5QbYqnR+aL4ff6pc1o1LCKgmvC1nVEBtoi+BbSJaPVNZuaOqICUZvTDOBqfijRevALyL2K2mKft/fv3jRKXbuJsgpx5nryt8avWK0CJKQq2v774NomAoAZzix8Ql8NimA+sOX4NCHiR/FwQSSKIgmgJ/MRjc+ADuW+k7RZQK/rl378lEYzVwDgYIXgt1i3gWuLauEQhAtRiRn1uASUB+hDsIdAb15PLKyDdvyFNEewoKeKZp/lmU06zQ5dXAEUoeIIEZHAIv775Ws0LW/qZx3wLIpeZ8SsioFntu3//2CBbAn85CRHmu8lt1Opu6VZKo0RJtuzn8RERS3ZA5CAtyNeyXhERAc3Vb5G85veIiAi4xudVxr0Czr+//Xn7881XV0nyQb4alAWM7oJXQFay3oQ4qI/O84YFsAslRogTC5CEBT+9/YVu1601LIBKwuP2+QbUl4WU2i3bE1Ob6xYA0RK1AvKxS2rPtG4BHhKliLLvyekVcPrx8fstx7Xi7BYxIi2LrwR5zdf1/cgrwPJvFHgGRQUGj9Ain80n71GK57GIgOcke4OiCSKC3ceS0S6kTvGyx6b5xdBhd6aAslAiAzFQDub9fZz43N3VXiPgsjTEnj8z3zz+sOWIkKfMKgGQLn8R4ROorTaWvgurBIhMKUL+aXalAFYW1Mi2/LXYQ99KAYeFZw3eBcxaSW+e+w54V27WvFU7wO2zxCzOF3lmC0ikeQLPqRSBvlVNY2anXrMEJHIQhXT5CIk+fsaNfYo1O+WaISCdmYAgRI9YMU5cJuQovGtshoDhEysI6WLXERQVkFa/o86LkFm7EBUwvPpSMmsXIgLcqy8RM3YhIkA8bmqnC+AgRwsrlIYERN/H0fksSEgACQStuvo12xNTm3fkiwg42U/KDbHU6HxRPPNtSuivs4gAq337KyrAFtG3gDYR9b7JzNwRFZDSjH4YR+NTkcaLVwDfKJXSFvN+XihfEC1Ml/XuAMnTY1YeygEcsuVZIfr5OG2BOUD9UesWUCvKuQf8LTAORkkexbsFHCVtjUkYIkArbsTvFlASoA/BnuK9cT25vALS/RvSFMGOkiKeeZpvNuU0O3R5BVCEgs3zQuVjU/qAiUImglxyD9mIgGYhTqgwCGGBvvy0BURY+ya3Uavbd14I4oAJNYw8mS/nL9kBFYE0UH+FjQhIv8hWkBrJGREwUucwll3yvo28Av4Xq8+qeAUwdyrYBU9Ct4DWcQGRyG+f8mHxY2vwvI3cAiDQEtHyM6cFzxxyhQSQIAckQO6rtdkF4nIQ93b7B9NC1R8WUJKoVsmceq9z8ANkQ6k5+jbyCjhx3iFVrLzkxBCoENpAfSx5cuxnJxjqgldAM3lOXkElafwQBdbmi1wNNnT9CgnIV07tndSLyrmIPUakX8SOOCICROCFhaBQkkFo6Yv0IwKu1U3CIJzDJuE3M+daJQCS+o5PO8cc5nuWVQL29JtEqD/drhSgVa+RZqzmH/atFDBMxjPhLsCzajPn3Hdg5mp6cq3aAW6fJTz8rs6ZLSCR5gk8p1IE+sYkjZmdes0SkMhBFNLlIyT6+Bk39inW7JRrhoB0ZgKCED1ixThxmZCj8K6xGQKGT6wgpItdR1BUQFr9jjovQmbtQlTA8OpLyaxdqAtQlWPrXn2lnbELEQHicVM7XQAHOVpYoTQkIPo+js5nQUICSCBo1dWv2Z6Y2rwjX0RAOiNBcohhe6F4S8CU0F9nEQEUvzmiAmwRfQtoExHvm8zMHVEBKc3oh3E0PhVpvHgF8I1SKW0x7+eF8gXRwnRZ7w6QPD3o40k7wCHL+aAS+ThtgTlA/VHrFlAryuEN/C0wDkZJHsW7BRwlbY1JGCJAK27E7xZQEqAPwZ7ivXE9ubwC0v0b0hTBjpIinnmabzblNDt0eQVQhIJd54V4KgmYlCMTQa58qLsdEdAsoieRkAYEykc7ByKsf5PbqNU9Pi8EaYHgFViyAyuItnJGBKRfZK3EI/7I2ygiIHEsX/SeL/30W2P5I1jiRuAVUP3/Qi2CECpJqi/L/yuyuOEPs1eA1Xq6IACeek+v9AE9LKANEAlo5376HoQFqKhIqY89Ilg7ksCcUUwToMJHR2bKsRkipgiYQYSn+bYIw7+RQwL2olb345WLYbzEx8inFvHgqTf+6hVweF5IpI0OK3oBHQIprcW6Lq8AiiVikKUjQGxvM743L4z82BIXgT2diADlf/7PNTt5SGlsuZ0hAJKQFui/GmYJeDXCZaFVAtiN4a8FJbme/ioBqr1cxEoB7AKQmNy2/HlMV3ulgC4C0aBPXsB/AAAA//8li2uyAAAABklEQVQDAF/gVU7aRmG8AAAAAElFTkSuQmCC",wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABtUlEQVR4AexW262DMAxNOwhrwBejMAB8syBfsAaLtLZVV1ZCmwY7QpV8FZPgV87xQdW9hz//cwJXC+gKuALKCfgnpBygutwVUI9Q2cAVUA5QXe4KqEeobFBLgQfgOjJw2y5rAgS6bdsgbZ5negfoFIfdbFkRIGAMOka3LAu5RJzyyal8WBB4CGBf4fR9H9BEPhL5WpMLWhDI3ZHEkQRaEjjh0BKg6f96L39KnI9KwFmlgpYA3H9+WahQQCABWjR9rrZWQUOAMRXvMYniBqLgEgJ4vxWJKgT2fQ9HhsClWZAwJcCgm6YJR8ZxSUJ7NiXAoBHUMAxBGvpkHN8tTEPgtm1bgoFBx4FP/lePW5z/67uGQHLHuq5hHEeyaZqCNPZjTlKocGgJvFUoAca52ukjby0B7EHWdV2Qhv8mSJMxPFORwcOCAKnwmiZB4l+beKcgPDAXDY6nv32opWVBABshkDcR/rWJdwSNBgWUD7t6WRFgIAQMQR4ZJFEcdrNlTYCBMdB457jZXouAGcBcIyeQm1DtuCtQe8K5/q5AbkK143UUqI1a9HcCYhiXHF2BS8YuLv17BZ4AAAD//4+CmpMAAAAGSURBVAMA7sawYcuQSOEAAAAASUVORK5CYIIA",yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADUElEQVR4AeyWPW4bMRCFKXepA1VOkSJtap1BgAQEgS8RqUiXKwRIlzOkTSlAZ9BZBFc5gMJvrFlwNxR/hpRiAzb4ln8zb97jUpbu3Av/u6aBkz+bEH7av13DgIheLBYuhJcu677v2loNIEoFMT6p6Pl87kLoug+WON9rY67j6r7FQFj4H+FTJWpmYkTDQi5dK+qtBsKCIl4F5qpqHEZ87IjHz6ubxcDp4cujFEIEQJQsVDzIIReQduYMDbGcRa2BQXyW2RBgMVFj4Kri1W+tiVIDNxFvMVFi4PTj4dHdH5X++j21qOkrZT8TOQMi3hP9l1ZiImVgJP7eW+BkfCeNu3o4HGTc8oADLuWgBrV0njORMqAc2f54rL9flpyYkGoDnFCMqMeahbvKQPhqewiOcdTWqDJAQQpYTorcFOCEOxUT20sZmH37/TaWM6zx4eNDOCxUDsiFI5V21jC7FJMycCnnWa2bDfDKezlp4TIZsNzVnFkrZ85A8DkYS6AgJ8cd5i7X/F8nlhxy4YBrzP40y91/onIGiEkCAcmAxGZLrtKWGJC38OHNH80Z+ksnNwQUDGIc1Co5fehLDBAngFgGwQMBX/2vVa4EVyPYig6JIZYccqdBsRrTmHBeamD2+dd7ySspsNvtXAxCkHgo97nWxf/9IUWpAcm5e/d0jbSQLPoHJ8mJcrIIX61WLgb2iCGWHJ86NOXUGsNGZlBlAC4toAVZ477+9N/aKpq1EMvl0gHdJ5YcjVEu5db1kr7GwOzT94/CGRZCiAqTzcQDE0DjydVw5TzXKLo+5NYYIN6E/X4/ysPEaKFhYjbAiXGCnGZJ/akJcsiFAy7mFtQaGK6RpRgmFLH82usDR60BchyFACcoCw0POOACFhqLgeIPmEFQNbfFALqqC5GUgYnTaiCj5XbbrwZud9bxSi1vYMZvG2j5YlIwT0Hj6Ik7c5juP/ktBsgXbDYbB5ggLAViiAWMW9FqQN7Cer0WHYhSbLdbF0LX6Qkmp/X04Wk1AIcAQTIoeNTE5uh6GJC3wGkiDLgLVdkDxAIfZr77PldaDwMQIWRkhJ8IISLCySG3Cb0MqAhEDUY45RA+SPZ93631NqDCVOi01/1u/bUMdBOYI3rxBv4CAAD//3MfRTEAAAAGSURBVAMA3M1DcMjGBaYAAAAASUVORK5CYIIA";class bt{name="メルト・ガルル";x=0;y=0;speed=5;fireRate=.2;fireTimer=0;hitboxRadius=5;playerImage;spriteWidth=48;spriteHeight=48;animationFrame=0;animationTimer=0;animationSpeed=.1;constructor(){this.playerImage=new Image,this.playerImage.src=vt}draw(t,i){this.animationTimer+=i,this.animationTimer>=this.animationSpeed&&(this.animationFrame=(this.animationFrame+1)%3,this.animationTimer=0),this.playerImage.complete&&t.drawImage(this.playerImage,0,this.animationFrame*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x-this.spriteWidth/2,this.y-this.spriteHeight/2,this.spriteWidth,this.spriteHeight)}}class O{x;y;direction;owner;color;speed;size;damage;constructor({x:t,y:i,direction:r,owner:a,color:l="#6973fa",speed:f=7,size:A=5,damage:x=1}){this.x=t,this.y=i,this.direction=r,this.owner=a,this.color=l,this.speed=f,this.size=A,this.damage=x}update(t){this.x+=this.direction.x*this.speed*60*t,this.y+=this.direction.y*this.speed*60*t}draw(t){t.beginPath();const i=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size);i.addColorStop(0,"white"),i.addColorStop(1,this.color),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=i,t.fill(),t.closePath()}}class ye{x;y;health;scoreValue;width=48;height=48;bulletColor;speed=4;hitboxRadius=10;fireTimer=0;enemyImage;constructor({x:t,y:i,health:r,scoreValue:a,imageSrc:l,bulletColor:f="#6973fa"}){this.x=t,this.y=i,this.health=r,this.scoreValue=a,this.bulletColor=f,this.enemyImage=new Image,this.enemyImage.src=l}update(t,i,r){this.y+=this.speed*60*t}draw(t){this.enemyImage.complete&&t.drawImage(this.enemyImage,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}}class Xe extends ye{fireRate=1;constructor({x:t,y:i,health:r,scoreValue:a}){super({x:t,y:i,health:r,scoreValue:a,imageSrc:wt})}}class qe extends ye{fireRate=1.5;constructor({x:t,y:i,health:r,scoreValue:a}){super({x:t,y:i,health:r,scoreValue:a,imageSrc:yt})}}class It extends ye{name="ベノム";targetX;targetY;moveOffset={x:0,y:0};fireTimer=0;patterns=[{time:1,type:"spread",speed:4,moveOffset:{x:.5,y:-.5}},{time:2,type:"circular",speed:2,moveOffset:{x:-.5,y:.5}},{time:3,type:"spiral",speed:2,moveOffset:{x:.8,y:.8}},{time:4,type:"random",speed:6,moveOffset:{x:-.8,y:-.8}}];currentPatternIndex=0;patternTimer=0;width=48;height=48;hitboxRadius=25;speed=.5;maxHealth;constructor({x:t,y:i,health:r,scoreValue:a}){super({x:t,y:i,health:r,scoreValue:a,bulletColor:"#9b68fa",imageSrc:xt}),this.targetX=t,this.targetY=i,this.maxHealth=r}update(t,i,r){const a=this.patterns[this.currentPatternIndex],l=(a.moveOffset.x+1)/2,f=(a.moveOffset.y+1)/2;this.targetX=l*(i-this.width),this.targetY=f*(r*.4-this.height),this.targetX+=this.width/2,this.targetY+=this.height/2,this.x+=(this.targetX-this.x)*this.speed*t,this.y+=(this.targetY-this.y)*this.speed*t,this.fireTimer+=t,this.patternTimer+=t}}function Ct(s,t){o(t,!1)}var Et=q('<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&amp;display=swap" rel="stylesheet"/>'),Bt=q('<div class="absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4"><h2 class="text-6xl font-extrabold text-red-500 mb-4 animate-pulse">ゲームオーバー</h2> <p class="text-3xl font-semibold text-gray-300 mb-8"> </p> <button class="px-8 py-4 bg-green-500 hover:bg-green-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">リスタート</button></div>'),kt=q('<div class="absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4"><h2 class="text-6xl font-extrabold text-yellow-400 mb-4 animate-pulse">ゲームクリア！</h2> <p class="text-3xl font-semibold text-gray-300 mb-8"> </p> <p class="text-xl font-semibold text-gray-400 mb-8">世界に平和が戻った。</p> <button class="px-8 py-4 bg-green-500 hover:bg-green-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">もう一度プレイ</button></div>'),Qt=()=>{},Rt=q('<div tabindex="0" role="button" class="absolute inset-0 z-30 flex flex-col p-4 pointer-events-auto"><div class="flex-grow flex justify-between items-end p-4 mb-2"><img class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/> <img class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/></div> <div class="w-full bg-gray-800 bg-opacity-90 rounded-xl p-4 shadow-2xl border-2 border-blue-400 text-lg sm:text-xl font-semibold"><p class="text-blue-200 mb-1"> </p> <p class="text-white"> </p></div></div>'),Ft=q(`<div class="bg-gray-900 text-white font-['M_PLUS_Rounded_1c'] flex flex-col justify-center items-center h-screen overflow-hidden"><div class="relative max-w-lg w-full h-full my-4 shadow-lg rounded-lg overflow-hidden"><canvas class="bg-black border-2 border-gray-600 w-full h-full touch-none"></canvas> <div class="absolute top-0 left-0 w-full flex justify-between p-4 box-border pointer-events-none z-10"><div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div> <div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div></div> <div><div class="h-full bg-red-500 transition-all duration-300"></div></div> <div><h1 class="text-4xl sm:text-6xl font-extrabold text-blue-400 mb-6">スマホで遊べるSTG</h1> <p class="text-lg sm:text-2xl font-semibold mb-8 text-gray-300">画面を指でなぞって移動。<br/>                 PCでは十字キーで操作。<br/>                 弾は自動で発射されます。</p> <button class="px-8 py-4 bg-blue-500 hover:bg-blue-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">ゲームスタート</button></div> <!> <!> <!></div></div>`);function St(s,t){ot(t,!0);let i,r,a=v(0),l=v(3),f=v(!1),A=v(!1),x=W({}),B=v(!1),Y=v(!1),M=v(0);const G=4;let c=v(null),R=v(W([])),S=v(W([])),k=v(W([])),h=v(null),N=v(0),Z=v(0);const oe=[{time:1,type:"straight",x:50},{time:2,type:"straight",x:150},{time:3,type:"straight",x:250},{time:4,type:"straight",x:50},{time:5,type:"spread",x:150},{time:6,type:"spread",x:250},{time:7,type:"straight",x:100},{time:8,type:"spread",x:200},{time:9,type:"straight",x:150},{time:10,type:"straight",x:50},{time:11,type:"straight",x:150},{time:12,type:"spread",x:250},{time:13,type:"straight",x:50},{time:14,type:"spread",x:150},{time:15,type:"straight",x:250}];let V=0,J,be=v(100),F=v(!1),D=v(0),P=v(!1);const j=[{speaker:"boss",text:"よく来たな、テメェ。ここがテメェの墓場だ。",image:Ne},{speaker:"player",text:"キミがこの世界の歪みの根源か！"},{speaker:"boss",text:"歪み？フッ...オレこそがこの世界の支配者だ！テメェみたいな異分子は消えてもらう！",image:We},{speaker:"player",text:"そんな理不尽な秩序、ボクがぶち壊してやる！"},{speaker:"boss",text:"口だけは達者なようだな...なら力で示してみせろ！",image:Ne}],le=[{speaker:"boss",text:"ぐ、ぐああああああ…この、オレが……",image:se},{speaker:"boss",text:"まさか、こんな未熟な存在に…敗れるとは…。",image:se},{speaker:"player",text:"未熟かもしれないけど、ボクには守りたいものがある！その思いが、キミより強かっただけだ。"},{speaker:"boss",text:"そうか…そうだな…。",image:se},{speaker:"boss",text:"…これで、この世界の歪みは…消えるのか…。",image:se},{speaker:"player",text:"ああ、ボクが新しい未来を作るんだ。"}];let C=v(W(j));const he=new ne(0,{duration:300,easing:Ue}),ce=new ne(0,{duration:300,easing:Ue}),_=()=>{o(A,!0),o(f,!1),o(P,!1),o(F,!1),o(a,0),o(l,3),o(R,[],!0),o(S,[],!0),o(k,[],!0),o(h,null),o(N,0),o(Z,0),o(Y,!1),o(M,0),o(C,j,!0),e(c)||o(c,new bt,!0),i&&(e(c).x=i.width/2,e(c).y=i.height-80),V=performance.now()},Ie=()=>{o(B,!0),o(F,!0),o(D,0),Ce(e(C)[0].speaker)};function ue(){if(e(F)){if(e(D)>=e(C).length-1){o(F,!1),o(B,!1),e(C)===le&&o(P,!0),V=performance.now();return}te(D),e(D)<e(C).length?Ce(e(C)[e(D)].speaker):e(C)===j?(o(F,!1),o(B,!1),V=performance.now()):e(C)===le&&(o(F,!1),o(P,!0),o(B,!0))}}function Ce(d){d==="player"?(he.target=1,ce.target=.3):(he.target=.3,ce.target=1)}He(()=>{if(!e(A)||e(f)||e(P))return;const d=m=>{if(!e(c))return;const g=(m-V)/1e3;if(V=m,e(B)){J=requestAnimationFrame(d);return}o(Z,e(Z)+g);const Q=x.shift?e(c).speed/2:e(c).speed;if((x.arrowleft||x.a)&&(e(c).x-=Q*60*g),(x.arrowright||x.d)&&(e(c).x+=Q*60*g),(x.arrowup||x.w)&&(e(c).y-=Q*60*g),(x.arrowdown||x.s)&&(e(c).y+=Q*60*g),e(c).x=Math.max(e(c).hitboxRadius,Math.min(e(c).x,i.width-e(c).hitboxRadius)),e(c).y=Math.max(e(c).hitboxRadius,Math.min(e(c).y,i.height-e(c).hitboxRadius)),e(c).fireTimer+=g,e(c).fireTimer>=e(c).fireRate&&(e(S).push(new O({x:e(c).x,y:e(c).y,direction:{x:0,y:-1},owner:"player",damage:5,color:"#fa6973"})),e(c).fireTimer=0),e(Y)&&(o(M,e(M)+g),e(M)>=G&&(o(Y,!1),o(M,0))),o(S,e(S).filter(n=>(n.update(g),n.y>-n.size)),!0),o(k,e(k).filter(n=>(n.update(g),n.y<i.height+n.size&&n.x>-n.size&&n.x<i.width+n.size)),!0),e(R).forEach(n=>{n.y+=n.speed*60*g,n.fireTimer+=g,n instanceof Xe?n.fireTimer>=n.fireRate&&(e(k).push(new O({x:n.x,y:n.y+n.height,direction:{x:0,y:1},owner:"enemy",color:n.bulletColor})),n.fireTimer=0):n instanceof qe&&n.fireTimer>=n.fireRate&&([-30,-15,0,15,30].forEach(E=>{const u=E*Math.PI/180,p=Math.sin(u),T=Math.cos(u);e(k).push(new O({x:n.x,y:n.y+n.height,direction:{x:p,y:T},owner:"enemy",color:n.bulletColor}))}),n.fireTimer=0)}),o(R,e(R).filter(n=>n.y<i.height+n.height),!0),e(N)<oe.length){const n=oe[e(N)];e(Z)>=n.time&&(n.type==="straight"?e(R).push(new Xe({x:n.x,y:-50,health:5,scoreValue:10})):n.type==="spread"&&e(R).push(new qe({x:n.x,y:-50,health:10,scoreValue:20})),te(N))}if(e(N)>=oe.length&&e(R).length===0&&!e(h)&&!e(F)&&(o(C,j,!0),Ie(),o(h,new It({x:i.width/2,y:100,health:500,scoreValue:1e3}),!0)),e(h)){e(h).update(g,i.width,i.height);const n=e(h).patterns[e(h).currentPatternIndex];if(e(h).patternTimer>=n.time&&(e(h).currentPatternIndex=(e(h).currentPatternIndex+1)%e(h).patterns.length,e(h).patternTimer=0),e(h).fireTimer>=.5){const w=n.speed;switch(n.type){case"spread":for(let E=-2;E<=2;E++){const p=E*15*Math.PI/180,T=Math.sin(p),K=Math.cos(p);e(k).push(new O({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:T,y:K},owner:"enemy",speed:w,size:8,color:e(h).bulletColor}))}break;case"circular":{for(let u=0;u<12;u++){const p=u/12*Math.PI*2,T=Math.sin(p)*w,K=Math.cos(p)*w;e(k).push(new O({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:T,y:K},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}))}break}case"spiral":{const u=e(h).fireTimer;for(let p=0;p<8;p++){const T=p/8*Math.PI*2+u,K=Math.sin(T)*w,pe=Math.cos(T)*w;e(k).push(new O({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:K,y:pe},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}))}break}case"random":Math.random()>.5&&e(k).push(new O({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:Math.random()*2-1,y:1},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}));break}e(h).fireTimer=0}}(()=>{if(!e(c))return;const n=new Set,w=new Set;let E=e(a);e(S).forEach(u=>{if(e(R).forEach(p=>{Math.hypot(u.x-p.x,u.y-p.y)<p.hitboxRadius+u.size&&(n.add(u),p.health-=u.damage,p.health<=0&&(w.add(p),E+=p.scoreValue))}),e(h)&&Math.hypot(u.x-e(h).x,u.y-e(h).y)<e(h).hitboxRadius+u.size){if(n.add(u),e(h).health-=u.damage,e(h).health<=0){E+=e(h).scoreValue,o(h,null),o(C,le,!0),Ie();return}o(be,e(h).health/e(h).maxHealth*100)}}),e(Y)||(e(k).forEach(u=>{if(!e(c))return;Math.hypot(u.x-e(c).x,u.y-e(c).y)<e(c).hitboxRadius+u.size&&(n.add(u),te(l,-1),e(l)<=0?o(f,!0):o(Y,!0))}),e(R).forEach(u=>{if(!e(c))return;Math.hypot(u.x-e(c).x,u.y-e(c).y)<e(c).hitboxRadius+u.hitboxRadius&&(te(l,-1),e(l)<=0?o(f,!0):o(Y,!0),w.add(u))})),o(S,e(S).filter(u=>!n.has(u)),!0),o(R,e(R).filter(u=>u.health>0&&!w.has(u)),!0),o(k,e(k).filter(u=>!n.has(u)),!0),o(a,E,!0)})(),r.clearRect(0,0,i.width,i.height),(!e(Y)||e(Y)&&Math.floor(e(M)*60/10)%2===0)&&e(c).draw(r,g);for(const n of e(S))n.draw(r);for(const n of e(R))n.draw(r);for(const n of e(k))n.draw(r);e(h)&&e(h).draw(r),J=requestAnimationFrame(d)};return J=requestAnimationFrame(d),()=>cancelAnimationFrame(J)});const Ee=d=>{e(F)||e(P)?(d.preventDefault(),ue()):x[d.key.toLowerCase()]=!0},Be=d=>{!e(F)&&!e(P)&&(x[d.key.toLowerCase()]=!1)};let de=0,ke=v(!1);function Ze(d){if(!e(A)||e(f)){_();return}e(F)||e(P)?(d.preventDefault(),ue()):(d.preventDefault(),o(ke,!0),de=d.touches[0].clientX)}function Je(d){if(!e(A)||e(f)||!e(c)||e(F))return;d.preventDefault();const m=d.touches[0].clientX,g=m-de;e(c).x+=g,de=m}const Qe=()=>{o(B,!0)},Re=()=>{o(B,!1),V=performance.now()};He(()=>{if(e(c))return i&&(r=i.getContext("2d"),fe(),e(c).x=i.width/2,e(c).y=i.height-80),window.addEventListener("keydown",Ee),window.addEventListener("keyup",Be),window.addEventListener("resize",fe),window.addEventListener("blur",Qe),window.addEventListener("focus",Re),()=>{window.removeEventListener("keydown",Ee),window.removeEventListener("keyup",Be),window.removeEventListener("resize",fe),window.removeEventListener("blur",Qe),window.removeEventListener("focus",Re)}});function fe(){const d=document.querySelector(".relative.max-w-lg");d&&(i.width=d.offsetWidth,i.height=d.offsetHeight)}var U=Ft();lt(d=>{var m=Et();X(d,m)}),U.__touchstart=Ze,U.__touchmove=Je,U.__touchend=[Ct,ke];var Fe=y(U),Te=y(Fe);ut(Te,d=>i=d,()=>i);var ge=I(Te,2),Ae=y(ge),je=y(Ae);b(Ae);var Ye=I(Ae,2),_e=y(Ye);b(Ye),b(ge);var $=I(ge,2);let Le;var $e=y($);let Me;b($);var ee=I($,2);let De;var et=I(y(ee),4);et.__click=_,b(ee);var Se=I(ee,2);{var tt=d=>{var m=Bt(),g=I(y(m),2),Q=y(g);b(g);var H=I(g,2);H.__click=_,b(m),ie(()=>z(Q,`最終スコア: ${e(a)??""}`)),X(d,m)};me(Se,d=>{e(f)&&d(tt)})}var Pe=I(Se,2);{var it=d=>{var m=kt(),g=I(y(m),2),Q=y(g);b(g);var H=I(g,4);H.__click=_,b(m),ie(()=>z(Q,`最終スコア: ${e(a)??""}`)),X(d,m)};me(Pe,d=>{e(P)&&d(it)})}var rt=I(Pe,2);{var st=d=>{var m=Rt();m.__keydown=[Qt],m.__click=ue;var g=y(m),Q=y(g);let H;var n=I(Q,2);let w;b(g);var E=I(g,2),u=y(E),p=y(u,!0);b(u);var T=I(u,2),K=y(T,!0);b(T),b(E),b(m),ie((pe,at)=>{re(Q,"src",mt),re(Q,"alt",e(c)?.name),H=ve(Q,"",H,pe),re(n,"src",e(C)[e(D)].speaker==="boss"?e(C)[e(D)].image:We),re(n,"alt",e(h)?.name),w=ve(n,"",w,at),z(p,e(C)[e(D)].speaker==="player"?e(c)?.name:e(h)?.name),z(K,e(C)[e(D)].text)},[()=>({opacity:he.current}),()=>({opacity:ce.current})]),X(d,m)};me(rt,d=>{e(F)&&d(st)})}b(Fe),b(U),ie((d,m,g)=>{z(je,`スコア: ${e(a)??""}`),z(_e,`残機: ${e(l)??""}`),Le=Ve($,1,"absolute top-2 left-1/2 -translate-x-1/2 w-4/5 md:w-3/5 h-6 bg-gray-700 rounded-full shadow-lg overflow-hidden",null,Le,d),Me=ve($e,"",Me,m),De=Ve(ee,1,"absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4",null,De,g)},[()=>({hidden:!e(h)}),()=>({width:`${e(be)}%`}),()=>({hidden:e(A)})]),X(s,U),ht()}ct(["touchstart","touchmove","touchend","click","keydown"]);export{St as component};
