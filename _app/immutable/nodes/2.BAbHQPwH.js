import"../chunks/DsnmJJEf.js";import{o as j,aF as x,S as it,aw as l,al as e,ag as rt,av as G,u as Ye,aJ as J,_ as pe,X as st,aq as Q,$ as Me,Z as de,ah as at,ao as b,ap as I}from"../chunks/DEERYOzy.js";import{d as nt,s as U}from"../chunks/BqXYD2dU.js";import{b as ot,i as lt}from"../chunks/cmih5K62.js";import{s as Le}from"../chunks/CgiPoevw.js";const Pe=[...` 	
\r\f \v\uFEFF`];function ht(s,t,i){var r=s==null?"":""+s;if(i){for(var a in i)if(i[a])r=r?r+" "+a:a;else if(r.length)for(var o=a.length,u=0;(u=r.indexOf(a,u))>=0;){var g=u+o;(u===0||Pe.includes(r[u-1]))&&(g===r.length||Pe.includes(r[g]))?r=(u===0?"":r.substring(0,u))+r.substring(g+1):u=g}}return r===""?null:r}function Se(s,t=!1){var i=t?" !important;":";",r="";for(var a in s){var o=s[a];o!=null&&o!==""&&(r+=" "+a+": "+o+i)}return r}function ct(s,t){if(t){var i="",r,a;return Array.isArray(t)?(r=t[0],a=t[1]):r=t,r&&(i+=Se(r)),a&&(i+=Se(a,!0)),i=i.trim(),i===""?null:i}return String(s)}function ue(s,t,i,r,a,o){var u=s.__className;if(j||u!==i||u===void 0){var g=ht(i,r,o);(!j||g!==s.getAttribute("class"))&&(g==null?s.removeAttribute("class"):s.className=g),s.__className=i}else if(o&&a!==o)for(var p in o){var R=!!o[p];(a==null||R!==!!a[p])&&s.classList.toggle(p,R)}return o}function fe(s,t={},i,r){for(var a in i){var o=i[a];t[a]!==o&&(i[a]==null?s.style.removeProperty(a):s.style.setProperty(a,o,r))}}function ge(s,t,i,r){var a=s.__style;if(j||a!==t){var o=ct(t,r);(!j||o!==s.getAttribute("style"))&&(o==null?s.removeAttribute("style"):s.style.cssText=o),s.__style=t}else r&&(Array.isArray(r)?(fe(s,i?.[0],r[0]),fe(s,i?.[1],r[1],"important")):fe(s,i,r));return r}const dt=()=>performance.now(),Y={tick:s=>requestAnimationFrame(s),now:()=>dt(),tasks:new Set};function ze(){const s=Y.now();Y.tasks.forEach(t=>{t.c(s)||(Y.tasks.delete(t),t.f())}),Y.tasks.size!==0&&Y.tick(ze)}function ut(s){let t;return Y.tasks.size===0&&Y.tick(ze),{promise:new Promise(i=>{Y.tasks.add(t={c:s,f:i})}),abort(){Y.tasks.delete(t)}}}function ft(s){return s}function De(s){return--s*s*s*s*s+1}function He(s){return Object.prototype.toString.call(s)==="[object Date]"}function Ae(s,t){if(s===t||s!==s)return()=>s;const i=typeof s;if(i!==typeof t||Array.isArray(s)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=t.map((a,o)=>Ae(s[o],a));return a=>r.map(o=>o(a))}if(i==="object"){if(!s||!t)throw new Error("Object cannot be null");if(He(s)&&He(t)){const o=s.getTime(),g=t.getTime()-o;return p=>new Date(o+p*g)}const r=Object.keys(t),a={};return r.forEach(o=>{a[o]=Ae(s[o],t[o])}),o=>{const u={};return r.forEach(g=>{u[g]=a[g](o)}),u}}if(i==="number"){const r=t-s;return a=>s+a*r}return()=>t}class _{#e;#i;#r;#t=null;constructor(t,i={}){this.#e=x(t),this.#i=x(t),this.#r=i}static of(t,i){const r=new _(t(),i);return it(()=>{r.set(t())}),r}set(t,i){l(this.#i,t);let{delay:r=0,duration:a=400,easing:o=ft,interpolate:u=Ae}={...this.#r,...i};if(a===0)return this.#t?.abort(),l(this.#e,t),Promise.resolve();const g=Y.now()+r;let p,R=!1,k=this.#t;return this.#t=ut(M=>{if(M<g)return!0;if(!R){R=!0;const h=this.#e.v;p=u(h,t),typeof a=="function"&&(a=a(h,t)),k?.abort()}const z=M-g;return z>a?(l(this.#e,t),!1):(l(this.#e,p(o(z/a))),!0)}),this.#t.promise}get current(){return e(this.#e)}get target(){return e(this.#i)}set target(t){this.set(t)}}const Ke=""+new URL("../assets/boss0000.DrC-qh-D.png",import.meta.url).href,Oe=""+new URL("../assets/boss0001.CDO59PxZ.png",import.meta.url).href,gt=""+new URL("../assets/player.B1E5JB-u.png",import.meta.url).href,At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEdElEQVR4AdyYPWtUQRSGZwQt1VqwsRMMQRFTxC5qIYoIBjSilYGIlbU/wkoUtLHQiFaipFBS5hdY2FlapzbIep6z90zmzt6PmbubGJV5d+Z8v+/s3c3iIfeP//tvBIzkjYgh5oFdNZ72Dnjovlz75YCc46T0LOE9Xem8ml3xg4ByNgE4AkhqgyRZQznOdGnftrnmTyfGAvzqiyPu/K3vaU7NjhrpQAmyyzZoUauI+nY2gqMk6O3L7mIB2P7spXkVkSuEwVKoJEp3ag1S27ngk5KnIBWAL4AiEBw9ByPTt/e0qYWZD2rOyGgSoO9ClON+n3wdm7Uzt2KEa4EGg1zclm82vhTMjInzZEhOeHTkrKtJAIGaiIWFCyqCpgQNEIAMNmf2ElCb1jEDMNN6tZEn3iaA2IQInDRnZzAEOOeCfOri/NhnvXPJ06dLAPGaCBzABnE2xETMl7N//nLX3Ti17NjT/K6bt9w+AeQFEXYza09W7Q8e8WJA1nDtyhsHPv74oH1sRg55CnIEkDchAmeKrnfBCHPbEDbEPUrJU5srgFwVUd0MtuN5TkEAHzsw4kaYmyYegzxAbyDniW8b8TWuEgE0CI0hwI03gUSDESfffGlNHJOcMEPOvatUAA11ACQwmkAMUiCOp7bFyK/O2rs6Z21DBGQ1JglikAZm4+M8KwwWAKkUXaRi4mkddldtV2ywAJqORiMHlo/ddwAiBuLAiJufnVxALSBvKKYSEA+9eWZHxbxdvKN7HOMMUYuRi28WKBAQxvHTWQ3vx5+599vjH3vrF1eCn5vf/PbMAc7ej3Mtx2q8H/u10LnQu7J7tyEC3O3Fp9rYiHnv3crWegB+EpbmHjnAGV+c47133vvwF916kluCQQLiARBLceL6V/fg+eEaqCFv6fhVJW07/mlQKiC8xdwYH8im4T8/XXYbGxu1EIJqjsqgB70qky3MwOhDrgCajhgErClnCBjMz46IVw93XAz8gPzN7Q39KUIPfIAzkLPOk7135QigmTZ6t/XYGdQhLww0QKwPELd8dmmhy/qyq2P8EmaPzcnXHAFeymKED7H4gyAbfProPdeFphp8kZh4FmfCrcgRMFEMWYMEGWIQM2tZvrc+7FmVSdIQAWG49OIs2+6anzvnurCbGU70iBECOYdcATyLKXL6T+RUj8pMetE8R8CI7+8YFE6LpF8sqKh1joCJhgwXJ0NlC0u/ZoPVcuBZr+pDBrZBnGlfcbWvPgF6++3lIZJFPmTP8NAnQP/DN53Hd734+ODJNl785ulD0+2Pq4e/9gnI6Zz7LuX0Ks7JEVB7F5puP3cqz3lVn1vSm5cjgCYqomH4TG+/6l97NBnehVwB9KCxAXsw+YooPRTYQI3ClxIBcevB5HmMaARhg9h2Mexi5q8hAgaTN1qIAJVdTLqq022IAC08KC+lAvJufx/VlQjQP/H23LLvI8/WUSUCeFZrQESM1il7GCgR0ETjrwuaVkAqqlNQ/G5xTouH2LMWkHKoCZJgky3u4esPAAAA//8PuSOiAAAABklEQVQDAOQpdH9TChAxAAAAAElFTkSuQmCC",pt="data:image/png;base64,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",mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABtUlEQVR4AexW262DMAxNOwhrwBejMAB8syBfsAaLtLZVV1ZCmwY7QpV8FZPgV87xQdW9hz//cwJXC+gKuALKCfgnpBygutwVUI9Q2cAVUA5QXe4KqEeobFBLgQfgOjJw2y5rAgS6bdsgbZ5negfoFIfdbFkRIGAMOka3LAu5RJzyyal8WBB4CGBf4fR9H9BEPhL5WpMLWhDI3ZHEkQRaEjjh0BKg6f96L39KnI9KwFmlgpYA3H9+WahQQCABWjR9rrZWQUOAMRXvMYniBqLgEgJ4vxWJKgT2fQ9HhsClWZAwJcCgm6YJR8ZxSUJ7NiXAoBHUMAxBGvpkHN8tTEPgtm1bgoFBx4FP/lePW5z/67uGQHLHuq5hHEeyaZqCNPZjTlKocGgJvFUoAca52ukjby0B7EHWdV2Qhv8mSJMxPFORwcOCAKnwmiZB4l+beKcgPDAXDY6nv32opWVBABshkDcR/rWJdwSNBgWUD7t6WRFgIAQMQR4ZJFEcdrNlTYCBMdB457jZXouAGcBcIyeQm1DtuCtQe8K5/q5AbkK143UUqI1a9HcCYhiXHF2BS8YuLv17BZ4AAAD//4+CmpMAAAAGSURBVAMA7sawYcuQSOEAAAAASUVORK5CYIIA",xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADUElEQVR4AeyWPW4bMRCFKXepA1VOkSJtap1BgAQEgS8RqUiXKwRIlzOkTSlAZ9BZBFc5gMJvrFlwNxR/hpRiAzb4ln8zb97jUpbu3Av/u6aBkz+bEH7av13DgIheLBYuhJcu677v2loNIEoFMT6p6Pl87kLoug+WON9rY67j6r7FQFj4H+FTJWpmYkTDQi5dK+qtBsKCIl4F5qpqHEZ87IjHz6ubxcDp4cujFEIEQJQsVDzIIReQduYMDbGcRa2BQXyW2RBgMVFj4Kri1W+tiVIDNxFvMVFi4PTj4dHdH5X++j21qOkrZT8TOQMi3hP9l1ZiImVgJP7eW+BkfCeNu3o4HGTc8oADLuWgBrV0njORMqAc2f54rL9flpyYkGoDnFCMqMeahbvKQPhqewiOcdTWqDJAQQpYTorcFOCEOxUT20sZmH37/TaWM6zx4eNDOCxUDsiFI5V21jC7FJMycCnnWa2bDfDKezlp4TIZsNzVnFkrZ85A8DkYS6AgJ8cd5i7X/F8nlhxy4YBrzP40y91/onIGiEkCAcmAxGZLrtKWGJC38OHNH80Z+ksnNwQUDGIc1Co5fehLDBAngFgGwQMBX/2vVa4EVyPYig6JIZYccqdBsRrTmHBeamD2+dd7ySspsNvtXAxCkHgo97nWxf/9IUWpAcm5e/d0jbSQLPoHJ8mJcrIIX61WLgb2iCGWHJ86NOXUGsNGZlBlAC4toAVZ477+9N/aKpq1EMvl0gHdJ5YcjVEu5db1kr7GwOzT94/CGRZCiAqTzcQDE0DjydVw5TzXKLo+5NYYIN6E/X4/ysPEaKFhYjbAiXGCnGZJ/akJcsiFAy7mFtQaGK6RpRgmFLH82usDR60BchyFACcoCw0POOACFhqLgeIPmEFQNbfFALqqC5GUgYnTaiCj5XbbrwZud9bxSi1vYMZvG2j5YlIwT0Hj6Ik7c5juP/ktBsgXbDYbB5ggLAViiAWMW9FqQN7Cer0WHYhSbLdbF0LX6Qkmp/X04Wk1AIcAQTIoeNTE5uh6GJC3wGkiDLgLVdkDxAIfZr77PldaDwMQIWRkhJ8IISLCySG3Cb0MqAhEDUY45RA+SPZ93631NqDCVOi01/1u/bUMdBOYI3rxBv4CAAD//3MfRTEAAAAGSURBVAMA3M1DcMjGBaYAAAAASUVORK5CYIIA";class vt{x=0;y=0;speed=5;fireRate=.2;fireTimer=0;hitboxRadius=5;playerImage;spriteWidth=48;spriteHeight=48;animationFrame=0;animationTimer=0;animationSpeed=.1;constructor(){this.playerImage=new Image,this.playerImage.src=pt}draw(t,i){this.animationTimer+=i,this.animationTimer>=this.animationSpeed&&(this.animationFrame=(this.animationFrame+1)%3,this.animationTimer=0),this.playerImage.complete&&t.drawImage(this.playerImage,0,this.animationFrame*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x-this.spriteWidth/2,this.y-this.spriteHeight/2,this.spriteWidth,this.spriteHeight)}}class H{x;y;direction;owner;color;speed;size;damage;constructor({x:t,y:i,direction:r,owner:a,color:o="#6973fa",speed:u=7,size:g=5,damage:p=1}){this.x=t,this.y=i,this.direction=r,this.owner=a,this.color=o,this.speed=u,this.size=g,this.damage=p}update(t){this.x+=this.direction.x*this.speed*60*t,this.y+=this.direction.y*this.speed*60*t}draw(t){t.beginPath();const i=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size);i.addColorStop(0,"white"),i.addColorStop(1,this.color),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=i,t.fill(),t.closePath()}}class me{x;y;health;scoreValue;width=48;height=48;bulletColor;speed=4;hitboxRadius=10;fireTimer=0;enemyImage;constructor({x:t,y:i,health:r,scoreValue:a,imageSrc:o,bulletColor:u="#6973fa"}){this.x=t,this.y=i,this.health=r,this.scoreValue=a,this.bulletColor=u,this.enemyImage=new Image,this.enemyImage.src=o}update(t,i,r){this.y+=this.speed*60*t}draw(t){this.enemyImage.complete&&t.drawImage(this.enemyImage,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}}class Ve extends me{fireRate=1;constructor({x:t,y:i,health:r,scoreValue:a}){super({x:t,y:i,health:r,scoreValue:a,imageSrc:mt})}}class Ue extends me{fireRate=1.5;constructor({x:t,y:i,health:r,scoreValue:a}){super({x:t,y:i,health:r,scoreValue:a,imageSrc:xt})}}class wt extends me{targetX;targetY;moveOffset={x:0,y:0};fireTimer=0;patterns=[{time:1,type:"spread",speed:4,moveOffset:{x:.5,y:-.5}},{time:2,type:"circular",speed:2,moveOffset:{x:-.5,y:.5}},{time:3,type:"spiral",speed:2,moveOffset:{x:.8,y:.8}},{time:4,type:"random",speed:6,moveOffset:{x:-.8,y:-.8}}];currentPatternIndex=0;patternTimer=0;width=48;height=48;hitboxRadius=25;speed=.5;maxHealth;constructor({x:t,y:i,health:r,scoreValue:a}){super({x:t,y:i,health:r,scoreValue:a,bulletColor:"#9b68fa",imageSrc:At}),this.targetX=t,this.targetY=i,this.maxHealth=r}update(t,i,r){const a=this.patterns[this.currentPatternIndex],o=(a.moveOffset.x+1)/2,u=(a.moveOffset.y+1)/2;this.targetX=o*(i-this.width),this.targetY=u*(r*.4-this.height),this.targetX+=this.width/2,this.targetY+=this.height/2,this.x+=(this.targetX-this.x)*this.speed*t,this.y+=(this.targetY-this.y)*this.speed*t,this.fireTimer+=t,this.patternTimer+=t}}function yt(s,t){l(t,!1)}var bt=pe('<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&amp;display=swap" rel="stylesheet"/>'),It=()=>{},Ct=pe('<div tabindex="0" role="button" class="absolute inset-0 z-30 flex flex-col p-4 pointer-events-auto"><div class="flex-grow flex justify-between items-end p-4 mb-2"><img alt="プレイヤー" class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/> <img alt="ボス" class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/></div> <div class="w-full bg-gray-800 bg-opacity-90 rounded-xl p-4 shadow-2xl border-2 border-blue-400 text-lg sm:text-xl font-semibold"><p class="text-blue-200 mb-1"> </p> <p class="text-white"> </p></div></div>'),Et=pe(`<div class="bg-gray-900 text-white font-['M_PLUS_Rounded_1c'] flex flex-col justify-center items-center h-screen overflow-hidden"><div class="relative max-w-lg w-full h-full my-4 shadow-lg rounded-lg overflow-hidden"><canvas class="bg-black border-2 border-gray-600 w-full h-full touch-none"></canvas> <div class="absolute top-0 left-0 w-full flex justify-between p-4 box-border pointer-events-none z-10"><div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div> <div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div></div> <div><div class="h-full bg-red-500 transition-all duration-300"></div></div> <div><h1 class="text-4xl sm:text-6xl font-extrabold text-blue-400 mb-6">スマホで遊べるSTG</h1> <p class="text-lg sm:text-2xl font-semibold mb-8 text-gray-300">画面を指でなぞって移動。<br/> PCでは十字キーで操作。<br/> 弾は自動で発射されます。</p> <button class="px-8 py-4 bg-blue-500 hover:bg-blue-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">ゲームスタート</button></div> <div><h2 class="text-6xl font-extrabold text-red-500 mb-4 animate-pulse">ゲームオーバー</h2> <p class="text-3xl font-semibold text-gray-300 mb-8"> </p> <button class="px-8 py-4 bg-green-500 hover:bg-green-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">リスタート</button></div> <!></div></div>`);function Tt(s,t){rt(t,!0);let i,r,a=x(0),o=x(3),u=x(!1),g=x(!1),p=G({}),R=x(!1),k=x(!1),M=x(0);const z=4;let h=x(null),E=x(G([])),L=x(G([])),C=x(G([])),c=x(null),O=x(0),N=x(0);const $=[{time:1,type:"straight",x:50},{time:2,type:"straight",x:150},{time:3,type:"straight",x:250},{time:4,type:"straight",x:50},{time:5,type:"spread",x:150},{time:6,type:"spread",x:250},{time:7,type:"straight",x:100},{time:8,type:"spread",x:200},{time:9,type:"straight",x:150},{time:10,type:"straight",x:50},{time:11,type:"straight",x:150},{time:12,type:"spread",x:250},{time:13,type:"straight",x:50},{time:14,type:"spread",x:150},{time:15,type:"straight",x:250}];let V=0,W,xe=x(100),F=x(!1),P=x(0);const S=[{speaker:"boss",text:"よくぞ来たな、弱き者よ。ここがお前の墓場だ。",image:Ke},{speaker:"player",text:"お前がこの世界の歪みの根源か！"},{speaker:"boss",text:"歪み？フン、我こそがこの世界の秩序。お前のような異分子は消え去るべきだ。",image:Oe},{speaker:"player",text:"そんな理不尽な秩序、俺がぶち壊してやる！"},{speaker:"boss",text:"口だけは達者なようだな…ならば力で示してみせろ！",image:Ke}],ee=new _(0,{duration:300,easing:De}),te=new _(0,{duration:300,easing:De}),ie=()=>{l(g,!0),l(u,!1),l(F,!1),l(a,0),l(o,3),l(E,[],!0),l(L,[],!0),l(C,[],!0),l(c,null),l(O,0),l(N,0),l(k,!1),l(M,0),e(h)||l(h,new vt,!0),i&&(e(h).x=i.width/2,e(h).y=i.height-80),V=performance.now()},Ne=()=>{l(R,!0),l(F,!0),l(P,0),ve(S[0].speaker)};function re(){e(F)&&(J(P),e(P)<S.length?ve(S[e(P)].speaker):(l(F,!1),l(R,!1),V=performance.now()))}function ve(f){f==="player"?(ee.target=1,te.target=.3):(ee.target=.3,te.target=1)}Ye(()=>{if(!e(g)||e(u))return;const f=w=>{if(!e(h))return;const m=(w-V)/1e3;if(V=w,e(R)){W=requestAnimationFrame(f);return}l(N,e(N)+m);const T=p.shift?e(h).speed/2:e(h).speed;if((p.arrowleft||p.a)&&(e(h).x-=T*60*m),(p.arrowright||p.d)&&(e(h).x+=T*60*m),(p.arrowup||p.w)&&(e(h).y-=T*60*m),(p.arrowdown||p.s)&&(e(h).y+=T*60*m),e(h).x=Math.max(e(h).hitboxRadius,Math.min(e(h).x,i.width-e(h).hitboxRadius)),e(h).y=Math.max(e(h).hitboxRadius,Math.min(e(h).y,i.height-e(h).hitboxRadius)),e(h).fireTimer+=m,e(h).fireTimer>=e(h).fireRate&&(e(L).push(new H({x:e(h).x,y:e(h).y,direction:{x:0,y:-1},owner:"player",damage:5,color:"#fa6973"})),e(h).fireTimer=0),e(k)&&(l(M,e(M)+m),e(M)>=z&&(l(k,!1),l(M,0))),l(L,e(L).filter(n=>(n.update(m),n.y>-n.size)),!0),l(C,e(C).filter(n=>(n.update(m),n.y<i.height+n.size&&n.x>-n.size&&n.x<i.width+n.size)),!0),e(E).forEach(n=>{n.y+=n.speed*60*m,n.fireTimer+=m,n instanceof Ve?n.fireTimer>=n.fireRate&&(e(C).push(new H({x:n.x,y:n.y+n.height,direction:{x:0,y:1},owner:"enemy",color:n.bulletColor})),n.fireTimer=0):n instanceof Ue&&n.fireTimer>=n.fireRate&&([-30,-15,0,15,30].forEach(y=>{const d=y*Math.PI/180,A=Math.sin(d),B=Math.cos(d);e(C).push(new H({x:n.x,y:n.y+n.height,direction:{x:A,y:B},owner:"enemy",color:n.bulletColor}))}),n.fireTimer=0)}),l(E,e(E).filter(n=>n.y<i.height+n.height),!0),e(O)<$.length){const n=$[e(O)];e(N)>=n.time&&(n.type==="straight"?e(E).push(new Ve({x:n.x,y:-50,health:10,scoreValue:10})):n.type==="spread"&&e(E).push(new Ue({x:n.x,y:-50,health:15,scoreValue:20})),J(O))}if(e(O)>=$.length&&e(E).length===0&&!e(c)&&!e(F)&&(Ne(),l(c,new wt({x:i.width/2,y:100,health:500,scoreValue:1e3}),!0)),e(c)){e(c).update(m,i.width,i.height);const n=e(c).patterns[e(c).currentPatternIndex];if(e(c).patternTimer>=n.time&&(e(c).currentPatternIndex=(e(c).currentPatternIndex+1)%e(c).patterns.length,e(c).patternTimer=0),e(c).fireTimer>=.5){const v=n.speed;switch(n.type){case"spread":for(let y=-2;y<=2;y++){const A=y*15*Math.PI/180,B=Math.sin(A),D=Math.cos(A);e(C).push(new H({x:e(c).x,y:e(c).y+e(c).height/2,direction:{x:B,y:D},owner:"enemy",speed:v,size:8,color:e(c).bulletColor}))}break;case"circular":{for(let d=0;d<12;d++){const A=d/12*Math.PI*2,B=Math.sin(A)*v,D=Math.cos(A)*v;e(C).push(new H({x:e(c).x,y:e(c).y+e(c).height/2,direction:{x:B,y:D},owner:"enemy",speed:v,size:6,color:e(c).bulletColor}))}break}case"spiral":{const d=e(c).fireTimer;for(let A=0;A<8;A++){const B=A/8*Math.PI*2+d,D=Math.sin(B)*v,ce=Math.cos(B)*v;e(C).push(new H({x:e(c).x,y:e(c).y+e(c).height/2,direction:{x:D,y:ce},owner:"enemy",speed:v,size:6,color:e(c).bulletColor}))}break}case"random":Math.random()>.5&&e(C).push(new H({x:e(c).x,y:e(c).y+e(c).height/2,direction:{x:Math.random()*2-1,y:1},owner:"enemy",speed:v,size:6,color:e(c).bulletColor}));break}e(c).fireTimer=0}}(()=>{if(!e(h))return;const n=new Set,v=new Set;let y=e(a);e(L).forEach(d=>{e(E).forEach(A=>{Math.hypot(d.x-A.x,d.y-A.y)<A.hitboxRadius+d.size&&(n.add(d),A.health-=d.damage,A.health<=0&&(v.add(A),y+=A.scoreValue))}),e(c)&&Math.hypot(d.x-e(c).x,d.y-e(c).y)<e(c).hitboxRadius+d.size&&(n.add(d),e(c).health-=d.damage,e(c).health<=0&&(y+=e(c).scoreValue),l(xe,e(c).health/e(c).maxHealth*100))}),e(k)||(e(C).forEach(d=>{if(!e(h))return;Math.hypot(d.x-e(h).x,d.y-e(h).y)<e(h).hitboxRadius+d.size&&(n.add(d),J(o,-1),e(o)<=0?l(u,!0):l(k,!0))}),e(E).forEach(d=>{if(!e(h))return;Math.hypot(d.x-e(h).x,d.y-e(h).y)<e(h).hitboxRadius+d.hitboxRadius&&(J(o,-1),e(o)<=0?l(u,!0):l(k,!0),v.add(d))})),l(L,e(L).filter(d=>!n.has(d)),!0),l(E,e(E).filter(d=>d.health>0&&!v.has(d)),!0),l(C,e(C).filter(d=>!n.has(d)),!0),l(a,y,!0)})(),r.clearRect(0,0,i.width,i.height),(!e(k)||e(k)&&Math.floor(e(M)*60/10)%2===0)&&e(h).draw(r,m);for(const n of e(L))n.draw(r);for(const n of e(E))n.draw(r);for(const n of e(C))n.draw(r);e(c)&&e(c).draw(r),W=requestAnimationFrame(f)};return W=requestAnimationFrame(f),()=>cancelAnimationFrame(W)});const we=f=>{e(F)?(f.preventDefault(),re()):p[f.key.toLowerCase()]=!0},ye=f=>{e(F)||(p[f.key.toLowerCase()]=!1)};let se=0,be=x(!1);function We(f){if(!e(g)||e(u)){ie();return}e(F)?(f.preventDefault(),re()):(f.preventDefault(),l(be,!0),se=f.touches[0].clientX)}function Xe(f){if(!e(g)||e(u)||!e(h)||e(F))return;f.preventDefault();const w=f.touches[0].clientX,m=w-se;e(h).x+=m,se=w}const Ie=()=>{l(R,!0)},Ce=()=>{l(R,!1),V=performance.now()};Ye(()=>{if(e(h))return i&&(r=i.getContext("2d"),ae(),e(h).x=i.width/2,e(h).y=i.height-80),window.addEventListener("keydown",we),window.addEventListener("keyup",ye),window.addEventListener("resize",ae),window.addEventListener("blur",Ie),window.addEventListener("focus",Ce),()=>{window.removeEventListener("keydown",we),window.removeEventListener("keyup",ye),window.removeEventListener("resize",ae),window.removeEventListener("blur",Ie),window.removeEventListener("focus",Ce)}});function ae(){const f=document.querySelector(".relative.max-w-lg");f&&(i.width=f.offsetWidth,i.height=f.offsetHeight)}var K=Et();st(f=>{var w=bt();de(f,w)}),K.__touchstart=We,K.__touchmove=Xe,K.__touchend=[yt,be];var Ee=b(K),Be=b(Ee);ot(Be,f=>i=f,()=>i);var ne=Q(Be,2),oe=b(ne),qe=b(oe);I(oe);var Qe=Q(oe,2),Ze=b(Qe);I(Qe),I(ne);var X=Q(ne,2);let Re;var Ge=b(X);let ke;I(X);var q=Q(X,2);let Fe;var Je=Q(b(q),4);Je.__click=ie,I(q);var Z=Q(q,2);let Te;var le=Q(b(Z),2),je=b(le);I(le);var _e=Q(le,2);_e.__click=ie,I(Z);var $e=Q(Z,2);{var et=f=>{var w=Ct();w.__keydown=[It],w.__click=re;var m=b(w),T=b(m);let he;var n=Q(T,2);let v;I(m);var y=Q(m,2),d=b(y),A=b(d,!0);I(d);var B=Q(d,2),D=b(B,!0);I(B),I(y),I(w),Me((ce,tt)=>{Le(T,"src",gt),he=ge(T,"",he,ce),Le(n,"src",S[e(P)].speaker==="boss"?S[e(P)].image:Oe),v=ge(n,"",v,tt),U(A,S[e(P)].speaker==="player"?"プレイヤー":"ボス"),U(D,S[e(P)].text)},[()=>({opacity:ee.current}),()=>({opacity:te.current})]),de(f,w)};lt($e,f=>{e(F)&&f(et)})}I(Ee),I(K),Me((f,w,m,T)=>{U(qe,`スコア: ${e(a)??""}`),U(Ze,`残機: ${e(o)??""}`),Re=ue(X,1,"absolute top-2 left-1/2 -translate-x-1/2 w-4/5 md:w-3/5 h-6 bg-gray-700 rounded-full shadow-lg overflow-hidden",null,Re,f),ke=ge(Ge,"",ke,w),Fe=ue(q,1,"absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4",null,Fe,m),Te=ue(Z,1,"absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4",null,Te,T),U(je,`最終スコア: ${e(a)??""}`)},[()=>({hidden:!e(c)}),()=>({width:`${e(xe)}%`}),()=>({hidden:e(g)}),()=>({hidden:!e(u)})]),de(s,K),at()}nt(["touchstart","touchmove","touchend","click","keydown"]);export{Tt as component};
