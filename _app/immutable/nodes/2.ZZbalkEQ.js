import"../chunks/DsnmJJEf.js";import{o as _,aF as x,S as it,aw as c,al as e,ag as rt,av as G,u as Me,aJ as J,_ as me,X as st,aq as Q,$ as Le,Z as ue,ah as at,ao as b,ap as I}from"../chunks/DEERYOzy.js";import{d as nt,s as U}from"../chunks/BqXYD2dU.js";import{b as ot,i as lt}from"../chunks/cmih5K62.js";import{s as j}from"../chunks/CgiPoevw.js";const Pe=[...` 	
\r\f \v\uFEFF`];function ht(s,t,i){var r=s==null?"":""+s;if(i){for(var n in i)if(i[n])r=r?r+" "+n:n;else if(r.length)for(var o=n.length,u=0;(u=r.indexOf(n,u))>=0;){var g=u+o;(u===0||Pe.includes(r[u-1]))&&(g===r.length||Pe.includes(r[g]))?r=(u===0?"":r.substring(0,u))+r.substring(g+1):u=g}}return r===""?null:r}function Se(s,t=!1){var i=t?" !important;":";",r="";for(var n in s){var o=s[n];o!=null&&o!==""&&(r+=" "+n+": "+o+i)}return r}function ct(s,t){if(t){var i="",r,n;return Array.isArray(t)?(r=t[0],n=t[1]):r=t,r&&(i+=Se(r)),n&&(i+=Se(n,!0)),i=i.trim(),i===""?null:i}return String(s)}function fe(s,t,i,r,n,o){var u=s.__className;if(_||u!==i||u===void 0){var g=ht(i,r,o);(!_||g!==s.getAttribute("class"))&&(g==null?s.removeAttribute("class"):s.className=g),s.__className=i}else if(o&&n!==o)for(var p in o){var R=!!o[p];(n==null||R!==!!n[p])&&s.classList.toggle(p,R)}return o}function ge(s,t={},i,r){for(var n in i){var o=i[n];t[n]!==o&&(i[n]==null?s.style.removeProperty(n):s.style.setProperty(n,o,r))}}function Ae(s,t,i,r){var n=s.__style;if(_||n!==t){var o=ct(t,r);(!_||o!==s.getAttribute("style"))&&(o==null?s.removeAttribute("style"):s.style.cssText=o),s.__style=t}else r&&(Array.isArray(r)?(ge(s,i?.[0],r[0]),ge(s,i?.[1],r[1],"important")):ge(s,i,r));return r}const dt=()=>performance.now(),Y={tick:s=>requestAnimationFrame(s),now:()=>dt(),tasks:new Set};function ze(){const s=Y.now();Y.tasks.forEach(t=>{t.c(s)||(Y.tasks.delete(t),t.f())}),Y.tasks.size!==0&&Y.tick(ze)}function ut(s){let t;return Y.tasks.size===0&&Y.tick(ze),{promise:new Promise(i=>{Y.tasks.add(t={c:s,f:i})}),abort(){Y.tasks.delete(t)}}}function ft(s){return s}function De(s){return--s*s*s*s*s+1}function He(s){return Object.prototype.toString.call(s)==="[object Date]"}function pe(s,t){if(s===t||s!==s)return()=>s;const i=typeof s;if(i!==typeof t||Array.isArray(s)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=t.map((n,o)=>pe(s[o],n));return n=>r.map(o=>o(n))}if(i==="object"){if(!s||!t)throw new Error("Object cannot be null");if(He(s)&&He(t)){const o=s.getTime(),g=t.getTime()-o;return p=>new Date(o+p*g)}const r=Object.keys(t),n={};return r.forEach(o=>{n[o]=pe(s[o],t[o])}),o=>{const u={};return r.forEach(g=>{u[g]=n[g](o)}),u}}if(i==="number"){const r=t-s;return n=>s+n*r}return()=>t}class ${#e;#i;#r;#t=null;constructor(t,i={}){this.#e=x(t),this.#i=x(t),this.#r=i}static of(t,i){const r=new $(t(),i);return it(()=>{r.set(t())}),r}set(t,i){c(this.#i,t);let{delay:r=0,duration:n=400,easing:o=ft,interpolate:u=pe}={...this.#r,...i};if(n===0)return this.#t?.abort(),c(this.#e,t),Promise.resolve();const g=Y.now()+r;let p,R=!1,F=this.#t;return this.#t=ut(M=>{if(M<g)return!0;if(!R){R=!0;const l=this.#e.v;p=u(l,t),typeof n=="function"&&(n=n(l,t)),F?.abort()}const z=M-g;return z>n?(c(this.#e,t),!1):(c(this.#e,p(o(z/n))),!0)}),this.#t.promise}get current(){return e(this.#e)}get target(){return e(this.#i)}set target(t){this.set(t)}}const Ke=""+new URL("../assets/boss0000.DrC-qh-D.png",import.meta.url).href,Oe=""+new URL("../assets/boss0001.CDO59PxZ.png",import.meta.url).href,gt=""+new URL("../assets/player.B1E5JB-u.png",import.meta.url).href,At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEdElEQVR4AdyYPWtUQRSGZwQt1VqwsRMMQRFTxC5qIYoIBjSilYGIlbU/wkoUtLHQiFaipFBS5hdY2FlapzbIep6z90zmzt6PmbubGJV5d+Z8v+/s3c3iIfeP//tvBIzkjYgh5oFdNZ72Dnjovlz75YCc46T0LOE9Xem8ml3xg4ByNgE4AkhqgyRZQznOdGnftrnmTyfGAvzqiyPu/K3vaU7NjhrpQAmyyzZoUauI+nY2gqMk6O3L7mIB2P7spXkVkSuEwVKoJEp3ag1S27ngk5KnIBWAL4AiEBw9ByPTt/e0qYWZD2rOyGgSoO9ClON+n3wdm7Uzt2KEa4EGg1zclm82vhTMjInzZEhOeHTkrKtJAIGaiIWFCyqCpgQNEIAMNmf2ElCb1jEDMNN6tZEn3iaA2IQInDRnZzAEOOeCfOri/NhnvXPJ06dLAPGaCBzABnE2xETMl7N//nLX3Ti17NjT/K6bt9w+AeQFEXYza09W7Q8e8WJA1nDtyhsHPv74oH1sRg55CnIEkDchAmeKrnfBCHPbEDbEPUrJU5srgFwVUd0MtuN5TkEAHzsw4kaYmyYegzxAbyDniW8b8TWuEgE0CI0hwI03gUSDESfffGlNHJOcMEPOvatUAA11ACQwmkAMUiCOp7bFyK/O2rs6Z21DBGQ1JglikAZm4+M8KwwWAKkUXaRi4mkddldtV2ywAJqORiMHlo/ddwAiBuLAiJufnVxALSBvKKYSEA+9eWZHxbxdvKN7HOMMUYuRi28WKBAQxvHTWQ3vx5+599vjH3vrF1eCn5vf/PbMAc7ej3Mtx2q8H/u10LnQu7J7tyEC3O3Fp9rYiHnv3crWegB+EpbmHjnAGV+c47133vvwF916kluCQQLiARBLceL6V/fg+eEaqCFv6fhVJW07/mlQKiC8xdwYH8im4T8/XXYbGxu1EIJqjsqgB70qky3MwOhDrgCajhgErClnCBjMz46IVw93XAz8gPzN7Q39KUIPfIAzkLPOk7135QigmTZ6t/XYGdQhLww0QKwPELd8dmmhy/qyq2P8EmaPzcnXHAFeymKED7H4gyAbfProPdeFphp8kZh4FmfCrcgRMFEMWYMEGWIQM2tZvrc+7FmVSdIQAWG49OIs2+6anzvnurCbGU70iBECOYdcATyLKXL6T+RUj8pMetE8R8CI7+8YFE6LpF8sqKh1joCJhgwXJ0NlC0u/ZoPVcuBZr+pDBrZBnGlfcbWvPgF6++3lIZJFPmTP8NAnQP/DN53Hd734+ODJNl785ulD0+2Pq4e/9gnI6Zz7LuX0Ks7JEVB7F5puP3cqz3lVn1vSm5cjgCYqomH4TG+/6l97NBnehVwB9KCxAXsw+YooPRTYQI3ClxIBcevB5HmMaARhg9h2Mexi5q8hAgaTN1qIAJVdTLqq022IAC08KC+lAvJufx/VlQjQP/H23LLvI8/WUSUCeFZrQESM1il7GCgR0ETjrwuaVkAqqlNQ/G5xTouH2LMWkHKoCZJgky3u4esPAAAA//8PuSOiAAAABklEQVQDAOQpdH9TChAxAAAAAElFTkSuQmCC",pt="data:image/png;base64,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",mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABtUlEQVR4AexW262DMAxNOwhrwBejMAB8syBfsAaLtLZVV1ZCmwY7QpV8FZPgV87xQdW9hz//cwJXC+gKuALKCfgnpBygutwVUI9Q2cAVUA5QXe4KqEeobFBLgQfgOjJw2y5rAgS6bdsgbZ5negfoFIfdbFkRIGAMOka3LAu5RJzyyal8WBB4CGBf4fR9H9BEPhL5WpMLWhDI3ZHEkQRaEjjh0BKg6f96L39KnI9KwFmlgpYA3H9+WahQQCABWjR9rrZWQUOAMRXvMYniBqLgEgJ4vxWJKgT2fQ9HhsClWZAwJcCgm6YJR8ZxSUJ7NiXAoBHUMAxBGvpkHN8tTEPgtm1bgoFBx4FP/lePW5z/67uGQHLHuq5hHEeyaZqCNPZjTlKocGgJvFUoAca52ukjby0B7EHWdV2Qhv8mSJMxPFORwcOCAKnwmiZB4l+beKcgPDAXDY6nv32opWVBABshkDcR/rWJdwSNBgWUD7t6WRFgIAQMQR4ZJFEcdrNlTYCBMdB457jZXouAGcBcIyeQm1DtuCtQe8K5/q5AbkK143UUqI1a9HcCYhiXHF2BS8YuLv17BZ4AAAD//4+CmpMAAAAGSURBVAMA7sawYcuQSOEAAAAASUVORK5CYIIA",xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADUElEQVR4AeyWPW4bMRCFKXepA1VOkSJtap1BgAQEgS8RqUiXKwRIlzOkTSlAZ9BZBFc5gMJvrFlwNxR/hpRiAzb4ln8zb97jUpbu3Av/u6aBkz+bEH7av13DgIheLBYuhJcu677v2loNIEoFMT6p6Pl87kLoug+WON9rY67j6r7FQFj4H+FTJWpmYkTDQi5dK+qtBsKCIl4F5qpqHEZ87IjHz6ubxcDp4cujFEIEQJQsVDzIIReQduYMDbGcRa2BQXyW2RBgMVFj4Kri1W+tiVIDNxFvMVFi4PTj4dHdH5X++j21qOkrZT8TOQMi3hP9l1ZiImVgJP7eW+BkfCeNu3o4HGTc8oADLuWgBrV0njORMqAc2f54rL9flpyYkGoDnFCMqMeahbvKQPhqewiOcdTWqDJAQQpYTorcFOCEOxUT20sZmH37/TaWM6zx4eNDOCxUDsiFI5V21jC7FJMycCnnWa2bDfDKezlp4TIZsNzVnFkrZ85A8DkYS6AgJ8cd5i7X/F8nlhxy4YBrzP40y91/onIGiEkCAcmAxGZLrtKWGJC38OHNH80Z+ksnNwQUDGIc1Co5fehLDBAngFgGwQMBX/2vVa4EVyPYig6JIZYccqdBsRrTmHBeamD2+dd7ySspsNvtXAxCkHgo97nWxf/9IUWpAcm5e/d0jbSQLPoHJ8mJcrIIX61WLgb2iCGWHJ86NOXUGsNGZlBlAC4toAVZ477+9N/aKpq1EMvl0gHdJ5YcjVEu5db1kr7GwOzT94/CGRZCiAqTzcQDE0DjydVw5TzXKLo+5NYYIN6E/X4/ysPEaKFhYjbAiXGCnGZJ/akJcsiFAy7mFtQaGK6RpRgmFLH82usDR60BchyFACcoCw0POOACFhqLgeIPmEFQNbfFALqqC5GUgYnTaiCj5XbbrwZud9bxSi1vYMZvG2j5YlIwT0Hj6Ik7c5juP/ktBsgXbDYbB5ggLAViiAWMW9FqQN7Cer0WHYhSbLdbF0LX6Qkmp/X04Wk1AIcAQTIoeNTE5uh6GJC3wGkiDLgLVdkDxAIfZr77PldaDwMQIWRkhJ8IISLCySG3Cb0MqAhEDUY45RA+SPZ93631NqDCVOi01/1u/bUMdBOYI3rxBv4CAAD//3MfRTEAAAAGSURBVAMA3M1DcMjGBaYAAAAASUVORK5CYIIA";class vt{name="メルト・ガルル";x=0;y=0;speed=5;fireRate=.2;fireTimer=0;hitboxRadius=5;playerImage;spriteWidth=48;spriteHeight=48;animationFrame=0;animationTimer=0;animationSpeed=.1;constructor(){this.playerImage=new Image,this.playerImage.src=pt}draw(t,i){this.animationTimer+=i,this.animationTimer>=this.animationSpeed&&(this.animationFrame=(this.animationFrame+1)%3,this.animationTimer=0),this.playerImage.complete&&t.drawImage(this.playerImage,0,this.animationFrame*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x-this.spriteWidth/2,this.y-this.spriteHeight/2,this.spriteWidth,this.spriteHeight)}}class H{x;y;direction;owner;color;speed;size;damage;constructor({x:t,y:i,direction:r,owner:n,color:o="#6973fa",speed:u=7,size:g=5,damage:p=1}){this.x=t,this.y=i,this.direction=r,this.owner=n,this.color=o,this.speed=u,this.size=g,this.damage=p}update(t){this.x+=this.direction.x*this.speed*60*t,this.y+=this.direction.y*this.speed*60*t}draw(t){t.beginPath();const i=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size);i.addColorStop(0,"white"),i.addColorStop(1,this.color),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=i,t.fill(),t.closePath()}}class xe{x;y;health;scoreValue;width=48;height=48;bulletColor;speed=4;hitboxRadius=10;fireTimer=0;enemyImage;constructor({x:t,y:i,health:r,scoreValue:n,imageSrc:o,bulletColor:u="#6973fa"}){this.x=t,this.y=i,this.health=r,this.scoreValue=n,this.bulletColor=u,this.enemyImage=new Image,this.enemyImage.src=o}update(t,i,r){this.y+=this.speed*60*t}draw(t){this.enemyImage.complete&&t.drawImage(this.enemyImage,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}}class Ve extends xe{fireRate=1;constructor({x:t,y:i,health:r,scoreValue:n}){super({x:t,y:i,health:r,scoreValue:n,imageSrc:mt})}}class Ue extends xe{fireRate=1.5;constructor({x:t,y:i,health:r,scoreValue:n}){super({x:t,y:i,health:r,scoreValue:n,imageSrc:xt})}}class wt extends xe{name="ベノム";targetX;targetY;moveOffset={x:0,y:0};fireTimer=0;patterns=[{time:1,type:"spread",speed:4,moveOffset:{x:.5,y:-.5}},{time:2,type:"circular",speed:2,moveOffset:{x:-.5,y:.5}},{time:3,type:"spiral",speed:2,moveOffset:{x:.8,y:.8}},{time:4,type:"random",speed:6,moveOffset:{x:-.8,y:-.8}}];currentPatternIndex=0;patternTimer=0;width=48;height=48;hitboxRadius=25;speed=.5;maxHealth;constructor({x:t,y:i,health:r,scoreValue:n}){super({x:t,y:i,health:r,scoreValue:n,bulletColor:"#9b68fa",imageSrc:At}),this.targetX=t,this.targetY=i,this.maxHealth=r}update(t,i,r){const n=this.patterns[this.currentPatternIndex],o=(n.moveOffset.x+1)/2,u=(n.moveOffset.y+1)/2;this.targetX=o*(i-this.width),this.targetY=u*(r*.4-this.height),this.targetX+=this.width/2,this.targetY+=this.height/2,this.x+=(this.targetX-this.x)*this.speed*t,this.y+=(this.targetY-this.y)*this.speed*t,this.fireTimer+=t,this.patternTimer+=t}}function yt(s,t){c(t,!1)}var bt=me('<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&amp;display=swap" rel="stylesheet"/>'),It=()=>{},Ct=me('<div tabindex="0" role="button" class="absolute inset-0 z-30 flex flex-col p-4 pointer-events-auto"><div class="flex-grow flex justify-between items-end p-4 mb-2"><img class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/> <img class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/></div> <div class="w-full bg-gray-800 bg-opacity-90 rounded-xl p-4 shadow-2xl border-2 border-blue-400 text-lg sm:text-xl font-semibold"><p class="text-blue-200 mb-1"> </p> <p class="text-white"> </p></div></div>'),Et=me(`<div class="bg-gray-900 text-white font-['M_PLUS_Rounded_1c'] flex flex-col justify-center items-center h-screen overflow-hidden"><div class="relative max-w-lg w-full h-full my-4 shadow-lg rounded-lg overflow-hidden"><canvas class="bg-black border-2 border-gray-600 w-full h-full touch-none"></canvas> <div class="absolute top-0 left-0 w-full flex justify-between p-4 box-border pointer-events-none z-10"><div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div> <div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div></div> <div><div class="h-full bg-red-500 transition-all duration-300"></div></div> <div><h1 class="text-4xl sm:text-6xl font-extrabold text-blue-400 mb-6">スマホで遊べるSTG</h1> <p class="text-lg sm:text-2xl font-semibold mb-8 text-gray-300">画面を指でなぞって移動。<br/> PCでは十字キーで操作。<br/> 弾は自動で発射されます。</p> <button class="px-8 py-4 bg-blue-500 hover:bg-blue-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">ゲームスタート</button></div> <div><h2 class="text-6xl font-extrabold text-red-500 mb-4 animate-pulse">ゲームオーバー</h2> <p class="text-3xl font-semibold text-gray-300 mb-8"> </p> <button class="px-8 py-4 bg-green-500 hover:bg-green-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">リスタート</button></div> <!></div></div>`);function Tt(s,t){rt(t,!0);let i,r,n=x(0),o=x(3),u=x(!1),g=x(!1),p=G({}),R=x(!1),F=x(!1),M=x(0);const z=4;let l=x(null),E=x(G([])),L=x(G([])),C=x(G([])),h=x(null),O=x(0),N=x(0);const ee=[{time:1,type:"straight",x:50},{time:2,type:"straight",x:150},{time:3,type:"straight",x:250},{time:4,type:"straight",x:50},{time:5,type:"spread",x:150},{time:6,type:"spread",x:250},{time:7,type:"straight",x:100},{time:8,type:"spread",x:200},{time:9,type:"straight",x:150},{time:10,type:"straight",x:50},{time:11,type:"straight",x:150},{time:12,type:"spread",x:250},{time:13,type:"straight",x:50},{time:14,type:"spread",x:150},{time:15,type:"straight",x:250}];let V=0,W,ve=x(100),T=x(!1),P=x(0);const S=[{speaker:"boss",text:"よくぞ来たな、弱き者よ。ここがお前の墓場だ。",image:Ke},{speaker:"player",text:"お前がこの世界の歪みの根源か！"},{speaker:"boss",text:"歪み？フン、我こそがこの世界の秩序。お前のような異分子は消え去るべきだ。",image:Oe},{speaker:"player",text:"そんな理不尽な秩序、俺がぶち壊してやる！"},{speaker:"boss",text:"口だけは達者なようだな…ならば力で示してみせろ！",image:Ke}],te=new $(0,{duration:300,easing:De}),ie=new $(0,{duration:300,easing:De}),re=()=>{c(g,!0),c(u,!1),c(T,!1),c(n,0),c(o,3),c(E,[],!0),c(L,[],!0),c(C,[],!0),c(h,null),c(O,0),c(N,0),c(F,!1),c(M,0),e(l)||c(l,new vt,!0),i&&(e(l).x=i.width/2,e(l).y=i.height-80),V=performance.now()},Ne=()=>{c(R,!0),c(T,!0),c(P,0),we(S[0].speaker)};function se(){e(T)&&(J(P),e(P)<S.length?we(S[e(P)].speaker):(c(T,!1),c(R,!1),V=performance.now()))}function we(f){f==="player"?(te.target=1,ie.target=.3):(te.target=.3,ie.target=1)}Me(()=>{if(!e(g)||e(u))return;const f=w=>{if(!e(l))return;const m=(w-V)/1e3;if(V=w,e(R)){W=requestAnimationFrame(f);return}c(N,e(N)+m);const k=p.shift?e(l).speed/2:e(l).speed;if((p.arrowleft||p.a)&&(e(l).x-=k*60*m),(p.arrowright||p.d)&&(e(l).x+=k*60*m),(p.arrowup||p.w)&&(e(l).y-=k*60*m),(p.arrowdown||p.s)&&(e(l).y+=k*60*m),e(l).x=Math.max(e(l).hitboxRadius,Math.min(e(l).x,i.width-e(l).hitboxRadius)),e(l).y=Math.max(e(l).hitboxRadius,Math.min(e(l).y,i.height-e(l).hitboxRadius)),e(l).fireTimer+=m,e(l).fireTimer>=e(l).fireRate&&(e(L).push(new H({x:e(l).x,y:e(l).y,direction:{x:0,y:-1},owner:"player",damage:5,color:"#fa6973"})),e(l).fireTimer=0),e(F)&&(c(M,e(M)+m),e(M)>=z&&(c(F,!1),c(M,0))),c(L,e(L).filter(a=>(a.update(m),a.y>-a.size)),!0),c(C,e(C).filter(a=>(a.update(m),a.y<i.height+a.size&&a.x>-a.size&&a.x<i.width+a.size)),!0),e(E).forEach(a=>{a.y+=a.speed*60*m,a.fireTimer+=m,a instanceof Ve?a.fireTimer>=a.fireRate&&(e(C).push(new H({x:a.x,y:a.y+a.height,direction:{x:0,y:1},owner:"enemy",color:a.bulletColor})),a.fireTimer=0):a instanceof Ue&&a.fireTimer>=a.fireRate&&([-30,-15,0,15,30].forEach(y=>{const d=y*Math.PI/180,A=Math.sin(d),B=Math.cos(d);e(C).push(new H({x:a.x,y:a.y+a.height,direction:{x:A,y:B},owner:"enemy",color:a.bulletColor}))}),a.fireTimer=0)}),c(E,e(E).filter(a=>a.y<i.height+a.height),!0),e(O)<ee.length){const a=ee[e(O)];e(N)>=a.time&&(a.type==="straight"?e(E).push(new Ve({x:a.x,y:-50,health:10,scoreValue:10})):a.type==="spread"&&e(E).push(new Ue({x:a.x,y:-50,health:15,scoreValue:20})),J(O))}if(e(O)>=ee.length&&e(E).length===0&&!e(h)&&!e(T)&&(Ne(),c(h,new wt({x:i.width/2,y:100,health:500,scoreValue:1e3}),!0)),e(h)){e(h).update(m,i.width,i.height);const a=e(h).patterns[e(h).currentPatternIndex];if(e(h).patternTimer>=a.time&&(e(h).currentPatternIndex=(e(h).currentPatternIndex+1)%e(h).patterns.length,e(h).patternTimer=0),e(h).fireTimer>=.5){const v=a.speed;switch(a.type){case"spread":for(let y=-2;y<=2;y++){const A=y*15*Math.PI/180,B=Math.sin(A),D=Math.cos(A);e(C).push(new H({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:B,y:D},owner:"enemy",speed:v,size:8,color:e(h).bulletColor}))}break;case"circular":{for(let d=0;d<12;d++){const A=d/12*Math.PI*2,B=Math.sin(A)*v,D=Math.cos(A)*v;e(C).push(new H({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:B,y:D},owner:"enemy",speed:v,size:6,color:e(h).bulletColor}))}break}case"spiral":{const d=e(h).fireTimer;for(let A=0;A<8;A++){const B=A/8*Math.PI*2+d,D=Math.sin(B)*v,de=Math.cos(B)*v;e(C).push(new H({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:D,y:de},owner:"enemy",speed:v,size:6,color:e(h).bulletColor}))}break}case"random":Math.random()>.5&&e(C).push(new H({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:Math.random()*2-1,y:1},owner:"enemy",speed:v,size:6,color:e(h).bulletColor}));break}e(h).fireTimer=0}}(()=>{if(!e(l))return;const a=new Set,v=new Set;let y=e(n);e(L).forEach(d=>{e(E).forEach(A=>{Math.hypot(d.x-A.x,d.y-A.y)<A.hitboxRadius+d.size&&(a.add(d),A.health-=d.damage,A.health<=0&&(v.add(A),y+=A.scoreValue))}),e(h)&&Math.hypot(d.x-e(h).x,d.y-e(h).y)<e(h).hitboxRadius+d.size&&(a.add(d),e(h).health-=d.damage,e(h).health<=0&&(y+=e(h).scoreValue),c(ve,e(h).health/e(h).maxHealth*100))}),e(F)||(e(C).forEach(d=>{if(!e(l))return;Math.hypot(d.x-e(l).x,d.y-e(l).y)<e(l).hitboxRadius+d.size&&(a.add(d),J(o,-1),e(o)<=0?c(u,!0):c(F,!0))}),e(E).forEach(d=>{if(!e(l))return;Math.hypot(d.x-e(l).x,d.y-e(l).y)<e(l).hitboxRadius+d.hitboxRadius&&(J(o,-1),e(o)<=0?c(u,!0):c(F,!0),v.add(d))})),c(L,e(L).filter(d=>!a.has(d)),!0),c(E,e(E).filter(d=>d.health>0&&!v.has(d)),!0),c(C,e(C).filter(d=>!a.has(d)),!0),c(n,y,!0)})(),r.clearRect(0,0,i.width,i.height),(!e(F)||e(F)&&Math.floor(e(M)*60/10)%2===0)&&e(l).draw(r,m);for(const a of e(L))a.draw(r);for(const a of e(E))a.draw(r);for(const a of e(C))a.draw(r);e(h)&&e(h).draw(r),W=requestAnimationFrame(f)};return W=requestAnimationFrame(f),()=>cancelAnimationFrame(W)});const ye=f=>{e(T)?(f.preventDefault(),se()):p[f.key.toLowerCase()]=!0},be=f=>{e(T)||(p[f.key.toLowerCase()]=!1)};let ae=0,Ie=x(!1);function We(f){if(!e(g)||e(u)){re();return}e(T)?(f.preventDefault(),se()):(f.preventDefault(),c(Ie,!0),ae=f.touches[0].clientX)}function Xe(f){if(!e(g)||e(u)||!e(l)||e(T))return;f.preventDefault();const w=f.touches[0].clientX,m=w-ae;e(l).x+=m,ae=w}const Ce=()=>{c(R,!0)},Ee=()=>{c(R,!1),V=performance.now()};Me(()=>{if(e(l))return i&&(r=i.getContext("2d"),ne(),e(l).x=i.width/2,e(l).y=i.height-80),window.addEventListener("keydown",ye),window.addEventListener("keyup",be),window.addEventListener("resize",ne),window.addEventListener("blur",Ce),window.addEventListener("focus",Ee),()=>{window.removeEventListener("keydown",ye),window.removeEventListener("keyup",be),window.removeEventListener("resize",ne),window.removeEventListener("blur",Ce),window.removeEventListener("focus",Ee)}});function ne(){const f=document.querySelector(".relative.max-w-lg");f&&(i.width=f.offsetWidth,i.height=f.offsetHeight)}var K=Et();st(f=>{var w=bt();ue(f,w)}),K.__touchstart=We,K.__touchmove=Xe,K.__touchend=[yt,Ie];var Be=b(K),Qe=b(Be);ot(Qe,f=>i=f,()=>i);var oe=Q(Qe,2),le=b(oe),qe=b(le);I(le);var Re=Q(le,2),Ze=b(Re);I(Re),I(oe);var X=Q(oe,2);let ke;var Ge=b(X);let Fe;I(X);var q=Q(X,2);let Te;var Je=Q(b(q),4);Je.__click=re,I(q);var Z=Q(q,2);let Ye;var he=Q(b(Z),2),je=b(he);I(he);var _e=Q(he,2);_e.__click=re,I(Z);var $e=Q(Z,2);{var et=f=>{var w=Ct();w.__keydown=[It],w.__click=se;var m=b(w),k=b(m);let ce;var a=Q(k,2);let v;I(m);var y=Q(m,2),d=b(y),A=b(d,!0);I(d);var B=Q(d,2),D=b(B,!0);I(B),I(y),I(w),Le((de,tt)=>{j(k,"src",gt),j(k,"alt",e(l)?.name),ce=Ae(k,"",ce,de),j(a,"src",S[e(P)].speaker==="boss"?S[e(P)].image:Oe),j(a,"alt",e(h)?.name),v=Ae(a,"",v,tt),U(A,S[e(P)].speaker==="player"?e(l)?.name:e(h)?.name),U(D,S[e(P)].text)},[()=>({opacity:te.current}),()=>({opacity:ie.current})]),ue(f,w)};lt($e,f=>{e(T)&&f(et)})}I(Be),I(K),Le((f,w,m,k)=>{U(qe,`スコア: ${e(n)??""}`),U(Ze,`残機: ${e(o)??""}`),ke=fe(X,1,"absolute top-2 left-1/2 -translate-x-1/2 w-4/5 md:w-3/5 h-6 bg-gray-700 rounded-full shadow-lg overflow-hidden",null,ke,f),Fe=Ae(Ge,"",Fe,w),Te=fe(q,1,"absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4",null,Te,m),Ye=fe(Z,1,"absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4",null,Ye,k),U(je,`最終スコア: ${e(n)??""}`)},[()=>({hidden:!e(h)}),()=>({width:`${e(ve)}%`}),()=>({hidden:e(g)}),()=>({hidden:!e(u)})]),ue(s,K),at()}nt(["touchstart","touchmove","touchend","click","keydown"]);export{Tt as component};
