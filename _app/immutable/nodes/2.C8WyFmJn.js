import"../chunks/DsnmJJEf.js";import{o as re,aF as x,S as ot,aw as o,al as e,ag as lt,av as N,u as He,_ as X,X as ht,aq as I,$,Z as W,ah as ct,aJ as ee,ao as y,ap as b}from"../chunks/DEERYOzy.js";import{d as ut,s as V}from"../chunks/BqXYD2dU.js";import{b as dt,i as me}from"../chunks/cmih5K62.js";import{s as te}from"../chunks/CgiPoevw.js";const Ke=[...` 	
\r\f \v\uFEFF`];function ft(s,t,i){var r=s==null?"":""+s;if(i){for(var n in i)if(i[n])r=r?r+" "+n:n;else if(r.length)for(var l=n.length,g=0;(g=r.indexOf(n,g))>=0;){var p=g+l;(g===0||Ke.includes(r[g-1]))&&(p===r.length||Ke.includes(r[p]))?r=(g===0?"":r.substring(0,g))+r.substring(p+1):g=p}}return r===""?null:r}function Oe(s,t=!1){var i=t?" !important;":";",r="";for(var n in s){var l=s[n];l!=null&&l!==""&&(r+=" "+n+": "+l+i)}return r}function gt(s,t){if(t){var i="",r,n;return Array.isArray(t)?(r=t[0],n=t[1]):r=t,r&&(i+=Oe(r)),n&&(i+=Oe(n,!0)),i=i.trim(),i===""?null:i}return String(s)}function Ve(s,t,i,r,n,l){var g=s.__className;if(re||g!==i||g===void 0){var p=ft(i,r,l);(!re||p!==s.getAttribute("class"))&&(p==null?s.removeAttribute("class"):s.className=p),s.__className=i}else if(l&&n!==l)for(var m in l){var B=!!l[m];(n==null||B!==!!n[m])&&s.classList.toggle(m,B)}return l}function xe(s,t={},i,r){for(var n in i){var l=i[n];t[n]!==l&&(i[n]==null?s.style.removeProperty(n):s.style.setProperty(n,l,r))}}function ve(s,t,i,r){var n=s.__style;if(re||n!==t){var l=gt(t,r);(!re||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=t}else r&&(Array.isArray(r)?(xe(s,i?.[0],r[0]),xe(s,i?.[1],r[1],"important")):xe(s,i,r));return r}const At=()=>performance.now(),Y={tick:s=>requestAnimationFrame(s),now:()=>At(),tasks:new Set};function Ge(){const s=Y.now();Y.tasks.forEach(t=>{t.c(s)||(Y.tasks.delete(t),t.f())}),Y.tasks.size!==0&&Y.tick(Ge)}function pt(s){let t;return Y.tasks.size===0&&Y.tick(Ge),{promise:new Promise(i=>{Y.tasks.add(t={c:s,f:i})}),abort(){Y.tasks.delete(t)}}}function mt(s){return s}function Ue(s){return--s*s*s*s*s+1}function ze(s){return Object.prototype.toString.call(s)==="[object Date]"}function we(s,t){if(s===t||s!==s)return()=>s;const i=typeof s;if(i!==typeof t||Array.isArray(s)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(s)){const r=t.map((n,l)=>we(s[l],n));return n=>r.map(l=>l(n))}if(i==="object"){if(!s||!t)throw new Error("Object cannot be null");if(ze(s)&&ze(t)){const l=s.getTime(),p=t.getTime()-l;return m=>new Date(l+m*p)}const r=Object.keys(t),n={};return r.forEach(l=>{n[l]=we(s[l],t[l])}),l=>{const g={};return r.forEach(p=>{g[p]=n[p](l)}),g}}if(i==="number"){const r=t-s;return n=>s+n*r}return()=>t}class se{#e;#i;#r;#t=null;constructor(t,i={}){this.#e=x(t),this.#i=x(t),this.#r=i}static of(t,i){const r=new se(t(),i);return ot(()=>{r.set(t())}),r}set(t,i){o(this.#i,t);let{delay:r=0,duration:n=400,easing:l=mt,interpolate:g=we}={...this.#r,...i};if(n===0)return this.#t?.abort(),o(this.#e,t),Promise.resolve();const p=Y.now()+r;let m,B=!1,F=this.#t;return this.#t=pt(L=>{if(L<p)return!0;if(!B){B=!0;const c=this.#e.v;m=g(c,t),typeof n=="function"&&(n=n(c,t)),F?.abort()}const q=L-p;return q>n?(o(this.#e,t),!1):(o(this.#e,m(l(q/n))),!0)}),this.#t.promise}get current(){return e(this.#e)}get target(){return e(this.#i)}set target(t){this.set(t)}}const Ne=""+new URL("../assets/boss0000.DrC-qh-D.png",import.meta.url).href,We=""+new URL("../assets/boss0001.CDO59PxZ.png",import.meta.url).href,ie=""+new URL("../assets/boss0002.-_lDpCuA.png",import.meta.url).href,xt=""+new URL("../assets/player.B1E5JB-u.png",import.meta.url).href,vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEdElEQVR4AdyYPWtUQRSGZwQt1VqwsRMMQRFTxC5qIYoIBjSilYGIlbU/wkoUtLHQiFaipFBS5hdY2FlapzbIep6z90zmzt6PmbubGJV5d+Z8v+/s3c3iIfeP//tvBIzkjYgh5oFdNZ72Dnjovlz75YCc46T0LOE9Xem8ml3xg4ByNgE4AkhqgyRZQznOdGnftrnmTyfGAvzqiyPu/K3vaU7NjhrpQAmyyzZoUauI+nY2gqMk6O3L7mIB2P7spXkVkSuEwVKoJEp3ag1S27ngk5KnIBWAL4AiEBw9ByPTt/e0qYWZD2rOyGgSoO9ClON+n3wdm7Uzt2KEa4EGg1zclm82vhTMjInzZEhOeHTkrKtJAIGaiIWFCyqCpgQNEIAMNmf2ElCb1jEDMNN6tZEn3iaA2IQInDRnZzAEOOeCfOri/NhnvXPJ06dLAPGaCBzABnE2xETMl7N//nLX3Ti17NjT/K6bt9w+AeQFEXYza09W7Q8e8WJA1nDtyhsHPv74oH1sRg55CnIEkDchAmeKrnfBCHPbEDbEPUrJU5srgFwVUd0MtuN5TkEAHzsw4kaYmyYegzxAbyDniW8b8TWuEgE0CI0hwI03gUSDESfffGlNHJOcMEPOvatUAA11ACQwmkAMUiCOp7bFyK/O2rs6Z21DBGQ1JglikAZm4+M8KwwWAKkUXaRi4mkddldtV2ywAJqORiMHlo/ddwAiBuLAiJufnVxALSBvKKYSEA+9eWZHxbxdvKN7HOMMUYuRi28WKBAQxvHTWQ3vx5+599vjH3vrF1eCn5vf/PbMAc7ej3Mtx2q8H/u10LnQu7J7tyEC3O3Fp9rYiHnv3crWegB+EpbmHjnAGV+c47133vvwF916kluCQQLiARBLceL6V/fg+eEaqCFv6fhVJW07/mlQKiC8xdwYH8im4T8/XXYbGxu1EIJqjsqgB70qky3MwOhDrgCajhgErClnCBjMz46IVw93XAz8gPzN7Q39KUIPfIAzkLPOk7135QigmTZ6t/XYGdQhLww0QKwPELd8dmmhy/qyq2P8EmaPzcnXHAFeymKED7H4gyAbfProPdeFphp8kZh4FmfCrcgRMFEMWYMEGWIQM2tZvrc+7FmVSdIQAWG49OIs2+6anzvnurCbGU70iBECOYdcATyLKXL6T+RUj8pMetE8R8CI7+8YFE6LpF8sqKh1joCJhgwXJ0NlC0u/ZoPVcuBZr+pDBrZBnGlfcbWvPgF6++3lIZJFPmTP8NAnQP/DN53Hd734+ODJNl785ulD0+2Pq4e/9gnI6Zz7LuX0Ks7JEVB7F5puP3cqz3lVn1vSm5cjgCYqomH4TG+/6l97NBnehVwB9KCxAXsw+YooPRTYQI3ClxIBcevB5HmMaARhg9h2Mexi5q8hAgaTN1qIAJVdTLqq022IAC08KC+lAvJufx/VlQjQP/H23LLvI8/WUSUCeFZrQESM1il7GCgR0ETjrwuaVkAqqlNQ/G5xTouH2LMWkHKoCZJgky3u4esPAAAA//8PuSOiAAAABklEQVQDAOQpdH9TChAxAAAAAElFTkSuQmCC",wt="data:image/png;base64,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",yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABtUlEQVR4AexW262DMAxNOwhrwBejMAB8syBfsAaLtLZVV1ZCmwY7QpV8FZPgV87xQdW9hz//cwJXC+gKuALKCfgnpBygutwVUI9Q2cAVUA5QXe4KqEeobFBLgQfgOjJw2y5rAgS6bdsgbZ5negfoFIfdbFkRIGAMOka3LAu5RJzyyal8WBB4CGBf4fR9H9BEPhL5WpMLWhDI3ZHEkQRaEjjh0BKg6f96L39KnI9KwFmlgpYA3H9+WahQQCABWjR9rrZWQUOAMRXvMYniBqLgEgJ4vxWJKgT2fQ9HhsClWZAwJcCgm6YJR8ZxSUJ7NiXAoBHUMAxBGvpkHN8tTEPgtm1bgoFBx4FP/lePW5z/67uGQHLHuq5hHEeyaZqCNPZjTlKocGgJvFUoAca52ukjby0B7EHWdV2Qhv8mSJMxPFORwcOCAKnwmiZB4l+beKcgPDAXDY6nv32opWVBABshkDcR/rWJdwSNBgWUD7t6WRFgIAQMQR4ZJFEcdrNlTYCBMdB457jZXouAGcBcIyeQm1DtuCtQe8K5/q5AbkK143UUqI1a9HcCYhiXHF2BS8YuLv17BZ4AAAD//4+CmpMAAAAGSURBVAMA7sawYcuQSOEAAAAASUVORK5CYIIA",bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADUElEQVR4AeyWPW4bMRCFKXepA1VOkSJtap1BgAQEgS8RqUiXKwRIlzOkTSlAZ9BZBFc5gMJvrFlwNxR/hpRiAzb4ln8zb97jUpbu3Av/u6aBkz+bEH7av13DgIheLBYuhJcu677v2loNIEoFMT6p6Pl87kLoug+WON9rY67j6r7FQFj4H+FTJWpmYkTDQi5dK+qtBsKCIl4F5qpqHEZ87IjHz6ubxcDp4cujFEIEQJQsVDzIIReQduYMDbGcRa2BQXyW2RBgMVFj4Kri1W+tiVIDNxFvMVFi4PTj4dHdH5X++j21qOkrZT8TOQMi3hP9l1ZiImVgJP7eW+BkfCeNu3o4HGTc8oADLuWgBrV0njORMqAc2f54rL9flpyYkGoDnFCMqMeahbvKQPhqewiOcdTWqDJAQQpYTorcFOCEOxUT20sZmH37/TaWM6zx4eNDOCxUDsiFI5V21jC7FJMycCnnWa2bDfDKezlp4TIZsNzVnFkrZ85A8DkYS6AgJ8cd5i7X/F8nlhxy4YBrzP40y91/onIGiEkCAcmAxGZLrtKWGJC38OHNH80Z+ksnNwQUDGIc1Co5fehLDBAngFgGwQMBX/2vVa4EVyPYig6JIZYccqdBsRrTmHBeamD2+dd7ySspsNvtXAxCkHgo97nWxf/9IUWpAcm5e/d0jbSQLPoHJ8mJcrIIX61WLgb2iCGWHJ86NOXUGsNGZlBlAC4toAVZ477+9N/aKpq1EMvl0gHdJ5YcjVEu5db1kr7GwOzT94/CGRZCiAqTzcQDE0DjydVw5TzXKLo+5NYYIN6E/X4/ysPEaKFhYjbAiXGCnGZJ/akJcsiFAy7mFtQaGK6RpRgmFLH82usDR60BchyFACcoCw0POOACFhqLgeIPmEFQNbfFALqqC5GUgYnTaiCj5XbbrwZud9bxSi1vYMZvG2j5YlIwT0Hj6Ik7c5juP/ktBsgXbDYbB5ggLAViiAWMW9FqQN7Cer0WHYhSbLdbF0LX6Qkmp/X04Wk1AIcAQTIoeNTE5uh6GJC3wGkiDLgLVdkDxAIfZr77PldaDwMQIWRkhJ8IISLCySG3Cb0MqAhEDUY45RA+SPZ93631NqDCVOi01/1u/bUMdBOYI3rxBv4CAAD//3MfRTEAAAAGSURBVAMA3M1DcMjGBaYAAAAASUVORK5CYIIA";class It{name="メルト・ガルル";x=0;y=0;speed=5;fireRate=.2;fireTimer=0;hitboxRadius=5;playerImage;spriteWidth=48;spriteHeight=48;animationFrame=0;animationTimer=0;animationSpeed=.1;constructor(){this.playerImage=new Image,this.playerImage.src=wt}draw(t,i){this.animationTimer+=i,this.animationTimer>=this.animationSpeed&&(this.animationFrame=(this.animationFrame+1)%3,this.animationTimer=0),this.playerImage.complete&&t.drawImage(this.playerImage,0,this.animationFrame*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x-this.spriteWidth/2,this.y-this.spriteHeight/2,this.spriteWidth,this.spriteHeight)}}class K{x;y;direction;owner;color;speed;size;damage;constructor({x:t,y:i,direction:r,owner:n,color:l="#6973fa",speed:g=7,size:p=5,damage:m=1}){this.x=t,this.y=i,this.direction=r,this.owner=n,this.color=l,this.speed=g,this.size=p,this.damage=m}update(t){this.x+=this.direction.x*this.speed*60*t,this.y+=this.direction.y*this.speed*60*t}draw(t){t.beginPath();const i=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size);i.addColorStop(0,"white"),i.addColorStop(1,this.color),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fillStyle=i,t.fill(),t.closePath()}}class ye{x;y;health;scoreValue;width=48;height=48;bulletColor;speed=4;hitboxRadius=10;fireTimer=0;enemyImage;constructor({x:t,y:i,health:r,scoreValue:n,imageSrc:l,bulletColor:g="#6973fa"}){this.x=t,this.y=i,this.health=r,this.scoreValue=n,this.bulletColor=g,this.enemyImage=new Image,this.enemyImage.src=l}update(t,i,r){this.y+=this.speed*60*t}draw(t){this.enemyImage.complete&&t.drawImage(this.enemyImage,this.x-this.width/2,this.y-this.height/2,this.width,this.height)}}class Xe extends ye{fireRate=1;constructor({x:t,y:i,health:r,scoreValue:n}){super({x:t,y:i,health:r,scoreValue:n,imageSrc:yt})}}class qe extends ye{fireRate=1.5;constructor({x:t,y:i,health:r,scoreValue:n}){super({x:t,y:i,health:r,scoreValue:n,imageSrc:bt})}}class Ct extends ye{name="ベノム";targetX;targetY;moveOffset={x:0,y:0};fireTimer=0;patterns=[{time:1,type:"spread",speed:4,moveOffset:{x:.5,y:-.5}},{time:2,type:"circular",speed:2,moveOffset:{x:-.5,y:.5}},{time:3,type:"spiral",speed:2,moveOffset:{x:.8,y:.8}},{time:4,type:"random",speed:6,moveOffset:{x:-.8,y:-.8}}];currentPatternIndex=0;patternTimer=0;width=48;height=48;hitboxRadius=25;speed=.5;maxHealth;constructor({x:t,y:i,health:r,scoreValue:n}){super({x:t,y:i,health:r,scoreValue:n,bulletColor:"#9b68fa",imageSrc:vt}),this.targetX=t,this.targetY=i,this.maxHealth=r}update(t,i,r){const n=this.patterns[this.currentPatternIndex],l=(n.moveOffset.x+1)/2,g=(n.moveOffset.y+1)/2;this.targetX=l*(i-this.width),this.targetY=g*(r*.4-this.height),this.targetX+=this.width/2,this.targetY+=this.height/2,this.x+=(this.targetX-this.x)*this.speed*t,this.y+=(this.targetY-this.y)*this.speed*t,this.fireTimer+=t,this.patternTimer+=t}}function Et(s,t){o(t,!1)}var Bt=X('<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&amp;display=swap" rel="stylesheet"/>'),kt=X('<div class="absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4"><h2 class="text-6xl font-extrabold text-red-500 mb-4 animate-pulse">ゲームオーバー</h2> <p class="text-3xl font-semibold text-gray-300 mb-8"> </p> <button class="px-8 py-4 bg-green-500 hover:bg-green-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">リスタート</button></div>'),Qt=X('<div class="absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4"><h2 class="text-6xl font-extrabold text-yellow-400 mb-4 animate-pulse">ゲームクリア！</h2> <p class="text-3xl font-semibold text-gray-300 mb-8"> </p> <p class="text-xl font-semibold text-gray-400 mb-8">世界に平和が戻った。</p> <button class="px-8 py-4 bg-green-500 hover:bg-green-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">もう一度プレイ</button></div>'),Rt=X('<div tabindex="0" role="button" class="absolute inset-0 z-30 flex flex-col p-4 pointer-events-auto"><div class="flex-grow flex justify-between items-end p-4 mb-2"><img class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/> <img class="h-2/3 max-h-80 object-contain transition-opacity duration-300"/></div> <div class="w-full bg-gray-800 bg-opacity-90 rounded-xl p-4 shadow-2xl border-2 border-blue-400 text-lg sm:text-xl font-semibold"><p class="text-blue-200 mb-1"> </p> <p class="text-white"> </p></div></div>'),Ft=X(`<div class="bg-gray-900 text-white font-['M_PLUS_Rounded_1c'] flex flex-col justify-center items-center h-screen overflow-hidden"><div class="relative max-w-lg w-full h-full my-4 shadow-lg rounded-lg overflow-hidden"><canvas class="bg-black border-2 border-gray-600 w-full h-full touch-none"></canvas> <div class="absolute top-0 left-0 w-full flex justify-between p-4 box-border pointer-events-none z-10"><div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div> <div class="text-xl font-bold p-2 bg-gray-700 rounded-lg shadow-lg"> </div></div> <div><div class="h-full bg-red-500 transition-all duration-300"></div></div> <div><h1 class="text-4xl sm:text-6xl font-extrabold text-blue-400 mb-6">スマホで遊べるSTG</h1> <p class="text-lg sm:text-2xl font-semibold mb-8 text-gray-300">画面を指でなぞって移動。<br/> PCでは十字キーで操作。<br/> 弾は自動で発射されます。</p> <button class="px-8 py-4 bg-blue-500 hover:bg-blue-600 rounded-full text-xl sm:text-3xl font-bold transition-transform transform hover:scale-105 shadow-lg">ゲームスタート</button></div> <!> <!> <!></div></div>`);function St(s,t){lt(t,!0);let i,r,n=x(0),l=x(3),g=x(!1),p=x(!1),m=N({}),B=x(!1),F=x(!1),L=x(0);const q=4;let c=x(null),k=x(N([])),D=x(N([])),E=x(N([])),h=x(null),U=x(0),G=x(0);const ae=[{time:1,type:"straight",x:50},{time:2,type:"straight",x:150},{time:3,type:"straight",x:250},{time:4,type:"straight",x:50},{time:5,type:"spread",x:150},{time:6,type:"spread",x:250},{time:7,type:"straight",x:100},{time:8,type:"spread",x:200},{time:9,type:"straight",x:150},{time:10,type:"straight",x:50},{time:11,type:"straight",x:150},{time:12,type:"spread",x:250},{time:13,type:"straight",x:50},{time:14,type:"spread",x:150},{time:15,type:"straight",x:250}];let z=0,Z,be=x(100),T=x(!1),S=x(0),H=x(!1);const ne=[{speaker:"boss",text:"よく来たな、テメェ。ここがテメェの墓場だ。",image:Ne},{speaker:"player",text:"キミがこの世界の歪みの根源か！"},{speaker:"boss",text:"歪み？フッ...オレこそがこの世界の支配者だ！テメェみたいな異分子は消えてもらう！",image:We},{speaker:"player",text:"そんな理不尽な秩序、ボクがぶち壊してやる！"},{speaker:"boss",text:"口だけは達者なようだな...なら力で示してみせろ！",image:Ne}],Ie=[{speaker:"boss",text:"ぐ、ぐああああああ…この、オレが……",image:ie},{speaker:"boss",text:"まさか、こんな未熟な存在に…敗れるとは…。",image:ie},{speaker:"player",text:"未熟かもしれないけど、ボクには守りたいものがある！その思いが、キミより強かっただけだ。"},{speaker:"boss",text:"そうか…そうだな…。",image:ie},{speaker:"boss",text:"…これで、この世界の歪みは…消えるのか…。",image:ie},{speaker:"player",text:"ああ、ボクが新しい未来を作るんだ。"}];let Q=x(N(ne));const oe=new se(0,{duration:300,easing:Ue}),le=new se(0,{duration:300,easing:Ue}),J=()=>{o(p,!0),o(g,!1),o(H,!1),o(T,!1),o(n,0),o(l,3),o(k,[],!0),o(D,[],!0),o(E,[],!0),o(h,null),o(U,0),o(G,0),o(F,!1),o(L,0),o(Q,ne,!0),e(c)||o(c,new It,!0),i&&(e(c).x=i.width/2,e(c).y=i.height-80),z=performance.now()},Ce=()=>{o(B,!0),o(T,!0),o(S,0),Ee(e(Q)[0].speaker)};function he(){e(T)&&(e(S)<e(Q).length-1?(ee(S),Ee(e(Q)[e(S)].speaker)):(o(T,!1),e(Q)===ne?(o(B,!1),z=performance.now()):e(Q)===Ie&&(o(H,!0),o(B,!0))))}function Ee(d){d==="player"?(oe.target=1,le.target=.3):(oe.target=.3,le.target=1)}const ce=d=>{if(!e(c))return;const f=(d-z)/1e3;if(z=d,e(B)){Z=requestAnimationFrame(ce);return}o(G,e(G)+f);const v=m.shift?e(c).speed/2:e(c).speed;if((m.arrowleft||m.a)&&(e(c).x-=v*60*f),(m.arrowright||m.d)&&(e(c).x+=v*60*f),(m.arrowup||m.w)&&(e(c).y-=v*60*f),(m.arrowdown||m.s)&&(e(c).y+=v*60*f),e(c).x=Math.max(e(c).hitboxRadius,Math.min(e(c).x,i.width-e(c).hitboxRadius)),e(c).y=Math.max(e(c).hitboxRadius,Math.min(e(c).y,i.height-e(c).hitboxRadius)),e(c).fireTimer+=f,e(c).fireTimer>=e(c).fireRate&&(e(D).push(new K({x:e(c).x,y:e(c).y,direction:{x:0,y:-1},owner:"player",damage:5,color:"#fa6973"})),e(c).fireTimer=0),e(F)&&(o(L,e(L)+f),e(L)>=q&&(o(F,!1),o(L,0))),o(D,e(D).filter(a=>(a.update(f),a.y>-a.size)),!0),o(E,e(E).filter(a=>(a.update(f),a.y<i.height+a.size&&a.x>-a.size&&a.x<i.width+a.size)),!0),e(k).forEach(a=>{a.y+=a.speed*60*f,a.fireTimer+=f,a instanceof Xe?a.fireTimer>=a.fireRate&&(e(E).push(new K({x:a.x,y:a.y+a.height,direction:{x:0,y:1},owner:"enemy",color:a.bulletColor})),a.fireTimer=0):a instanceof qe&&a.fireTimer>=a.fireRate&&([-30,-15,0,15,30].forEach(C=>{const u=C*Math.PI/180,A=Math.sin(u),R=Math.cos(u);e(E).push(new K({x:a.x,y:a.y+a.height,direction:{x:A,y:R},owner:"enemy",color:a.bulletColor}))}),a.fireTimer=0)}),o(k,e(k).filter(a=>a.y<i.height+a.height),!0),e(U)<ae.length){const a=ae[e(U)];e(G)>=a.time&&(a.type==="straight"?e(k).push(new Xe({x:a.x,y:-50,health:5,scoreValue:10})):a.type==="spread"&&e(k).push(new qe({x:a.x,y:-50,health:10,scoreValue:20})),ee(U))}if(e(U)>=ae.length&&e(k).length===0&&!e(h)&&!e(T)&&(Ce(),o(h,new Ct({x:i.width/2,y:100,health:500,scoreValue:1e3}),!0)),e(h)){e(h).update(f,i.width,i.height);const a=e(h).patterns[e(h).currentPatternIndex];if(e(h).patternTimer>=a.time&&(e(h).currentPatternIndex=(e(h).currentPatternIndex+1)%e(h).patterns.length,e(h).patternTimer=0),e(h).fireTimer>=.5){const w=a.speed;switch(a.type){case"spread":for(let C=-2;C<=2;C++){const A=C*15*Math.PI/180,R=Math.sin(A),P=Math.cos(A);e(E).push(new K({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:R,y:P},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}))}break;case"circular":{for(let u=0;u<12;u++){const A=u/12*Math.PI*2,R=Math.sin(A)*w,P=Math.cos(A)*w;e(E).push(new K({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:R,y:P},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}))}break}case"spiral":{const u=e(h).fireTimer;for(let A=0;A<8;A++){const R=A/8*Math.PI*2+u,P=Math.sin(R)*w,pe=Math.cos(R)*w;e(E).push(new K({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:P,y:pe},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}))}break}case"random":Math.random()>.5&&e(E).push(new K({x:e(h).x,y:e(h).y+e(h).height/2,direction:{x:Math.random()*2-1,y:1},owner:"enemy",speed:w,size:6,color:e(h).bulletColor}));break}e(h).fireTimer=0}}(()=>{if(!e(c))return;const a=new Set,w=new Set;let C=e(n);e(D).forEach(u=>{if(e(k).forEach(A=>{Math.hypot(u.x-A.x,u.y-A.y)<A.hitboxRadius+u.size&&(a.add(u),A.health-=u.damage,A.health<=0&&(w.add(A),C+=A.scoreValue))}),e(h)&&Math.hypot(u.x-e(h).x,u.y-e(h).y)<e(h).hitboxRadius+u.size){if(a.add(u),e(h).health-=u.damage,e(h).health<=0){C+=e(h).scoreValue,o(h,null),o(Q,Ie,!0),Ce();return}o(be,e(h).health/e(h).maxHealth*100)}}),e(F)||(e(E).forEach(u=>{if(!e(c))return;Math.hypot(u.x-e(c).x,u.y-e(c).y)<e(c).hitboxRadius+u.size&&(a.add(u),ee(l,-1),e(l)<=0?o(g,!0):o(F,!0))}),e(k).forEach(u=>{if(!e(c))return;Math.hypot(u.x-e(c).x,u.y-e(c).y)<e(c).hitboxRadius+u.hitboxRadius&&(ee(l,-1),e(l)<=0?o(g,!0):o(F,!0))})),o(D,e(D).filter(u=>!a.has(u)),!0),o(k,e(k).filter(u=>u.health>0&&!w.has(u)),!0),o(E,e(E).filter(u=>!a.has(u)),!0),o(n,C,!0)})(),r.clearRect(0,0,i.width,i.height),(!e(F)||e(F)&&Math.floor(e(L)*60/10)%2===0)&&e(c).draw(r,f);for(const a of e(D))a.draw(r);for(const a of e(k))a.draw(r);for(const a of e(E))a.draw(r);e(h)&&e(h).draw(r),Z=requestAnimationFrame(ce)};He(()=>{if(!(!e(p)||e(g)||e(H)))return Z=requestAnimationFrame(ce),()=>cancelAnimationFrame(Z)});const ue=d=>{e(T)||e(H)?(d.preventDefault(),he()):m[d.key.toLowerCase()]=!0},Be=d=>{!e(T)&&!e(H)&&(m[d.key.toLowerCase()]=!1)};let de=0,ke=x(!1);function Ze(d){if(!e(p)||e(g)||e(H)){J();return}e(T)?(d.preventDefault(),he()):(d.preventDefault(),o(ke,!0),de=d.touches[0].clientX)}function Je(d){if(!e(p)||e(g)||!e(c)||e(T))return;d.preventDefault();const f=d.touches[0].clientX,v=f-de;e(c).x+=v,de=f}const Qe=()=>{o(B,!0)},Re=()=>{o(B,!1),z=performance.now()};He(()=>{if(e(c))return i&&(r=i.getContext("2d"),fe(),e(c).x=i.width/2,e(c).y=i.height-80),window.addEventListener("keydown",ue),window.addEventListener("keyup",Be),window.addEventListener("resize",fe),window.addEventListener("blur",Qe),window.addEventListener("focus",Re),()=>{window.removeEventListener("keydown",ue),window.removeEventListener("keyup",Be),window.removeEventListener("resize",fe),window.removeEventListener("blur",Qe),window.removeEventListener("focus",Re)}});function fe(){const d=document.querySelector(".relative.max-w-lg");d&&(i.width=d.offsetWidth,i.height=d.offsetHeight)}var O=Ft();ht(d=>{var f=Bt();W(d,f)}),O.__touchstart=Ze,O.__touchmove=Je,O.__touchend=[Et,ke];var Fe=y(O),Te=y(Fe);dt(Te,d=>i=d,()=>i);var ge=I(Te,2),Ae=y(ge),je=y(Ae);b(Ae);var Ye=I(Ae,2),_e=y(Ye);b(Ye),b(ge);var j=I(ge,2);let Le;var $e=y(j);let Me;b(j);var _=I(j,2);let De;var et=I(y(_),4);et.__click=J,b(_);var Se=I(_,2);{var tt=d=>{var f=kt(),v=I(y(f),2),M=y(v);b(v);var a=I(v,2);a.__click=J,b(f),$(()=>V(M,`最終スコア: ${e(n)??""}`)),W(d,f)};me(Se,d=>{e(g)&&d(tt)})}var Pe=I(Se,2);{var it=d=>{var f=Qt(),v=I(y(f),2),M=y(v);b(v);var a=I(v,4);a.__click=J,b(f),$(()=>V(M,`最終スコア: ${e(n)??""}`)),W(d,f)};me(Pe,d=>{e(H)&&d(it)})}var rt=I(Pe,2);{var st=d=>{var f=Rt();f.__keydown=ue,f.__click=he;var v=y(f),M=y(v);let a;var w=I(M,2);let C;b(v);var u=I(v,2),A=y(u),R=y(A,!0);b(A);var P=I(A,2),pe=y(P,!0);b(P),b(u),b(f),$((at,nt)=>{te(M,"src",xt),te(M,"alt",e(c)?.name),a=ve(M,"",a,at),te(w,"src",e(Q)[e(S)].speaker==="boss"?e(Q)[e(S)].image:We),te(w,"alt",e(h)?.name),C=ve(w,"",C,nt),V(R,e(Q)[e(S)].speaker==="player"?e(c)?.name:e(h)?.name),V(pe,e(Q)[e(S)].text)},[()=>({opacity:oe.current}),()=>({opacity:le.current})]),W(d,f)};me(rt,d=>{e(T)&&d(st)})}b(Fe),b(O),$((d,f,v)=>{V(je,`スコア: ${e(n)??""}`),V(_e,`残機: ${e(l)??""}`),Le=Ve(j,1,"absolute top-2 left-1/2 -translate-x-1/2 w-4/5 md:w-3/5 h-6 bg-gray-700 rounded-full shadow-lg overflow-hidden",null,Le,d),Me=ve($e,"",Me,f),De=Ve(_,1,"absolute inset-0 bg-black/70 flex flex-col justify-center items-center text-center z-20 p-4",null,De,v)},[()=>({hidden:!e(h)}),()=>({width:`${e(be)}%`}),()=>({hidden:e(p)})]),W(s,O),ct()}ut(["touchstart","touchmove","touchend","click","keydown"]);export{St as component};
